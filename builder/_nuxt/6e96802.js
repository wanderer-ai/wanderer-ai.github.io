(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,r){var content=r(237);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("265c0852",content,!0,{sourceMap:!1})},137:function(e,t,r){var content=r(239);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("7a22fc3c",content,!0,{sourceMap:!1})},140:function(e,t,r){var content=r(256);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("138307d8",content,!0,{sourceMap:!1})},141:function(e,t,r){var content=r(261);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("0214e7de",content,!0,{sourceMap:!1})},142:function(e,t,r){var content=r(266);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("1158d6ae",content,!0,{sourceMap:!1})},143:function(e,t,r){var content=r(268);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("6777f2ae",content,!0,{sourceMap:!1})},144:function(e,t,r){var content=r(270);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("2654ba62",content,!0,{sourceMap:!1})},145:function(e,t,r){var content=r(272);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("8b5603ae",content,!0,{sourceMap:!1})},146:function(e,t,r){var content=r(274);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("a0bcd922",content,!0,{sourceMap:!1})},147:function(e,t,r){var content=r(276);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("79d461c9",content,!0,{sourceMap:!1})},148:function(e,t,r){var content=r(279);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("edd08b2e",content,!0,{sourceMap:!1})},149:function(e,t,r){var content=r(281);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("2e320e49",content,!0,{sourceMap:!1})},159:function(e,t,r){var content=r(343);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("093d7d81",content,!0,{sourceMap:!1})},160:function(e,t,r){var content=r(345);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("36f9a888",content,!0,{sourceMap:!1})},161:function(e,t,r){var content=r(347);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("1323935e",content,!0,{sourceMap:!1})},162:function(e,t,r){var content=r(349);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("340142f0",content,!0,{sourceMap:!1})},163:function(e,t,r){var content=r(351);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("287da820",content,!0,{sourceMap:!1})},165:function(e,t,r){var content=r(356);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("27e1858a",content,!0,{sourceMap:!1})},176:function(e,t,r){"use strict";var n=r(0),component=Object(n.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("nuxt")],1)}),[],!1,null,null,null);t.a=component.exports},177:function(e,t,r){e.exports=r(178)},216:function(e,t,r){"use strict";r.r(t);var n=r(41);t.default=function(){return new n.a.Store({state:function(){return{}}})}},236:function(e,t,r){"use strict";r(136)},237:function(e,t,r){(t=r(6)(!1)).push([e.i,"#cy{width:100%;height:100%}",""]),e.exports=t},238:function(e,t,r){"use strict";r(137)},239:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--alerts{position:fixed;max-width:400px;bottom:2rem;left:2rem;z-index:9999}",""]),e.exports=t},255:function(e,t,r){"use strict";r(140)},256:function(e,t,r){(t=r(6)(!1)).push([e.i,".upload--button{position:relative;overflow:hidden;display:inline-block}.upload--button input[type=file]{font-size:100px;position:absolute;left:0;top:0;opacity:0;cursor:pointer}",""]),e.exports=t},260:function(e,t,r){"use strict";r(141)},261:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--toolbar{top:2rem;left:2rem}",""]),e.exports=t},265:function(e,t,r){"use strict";r(142)},266:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--content p{margin-bottom:1rem}.builder--content a{text-decoration:underline}.builder--content strong{font-weight:700}",""]),e.exports=t},267:function(e,t,r){"use strict";r(143)},268:function(e,t,r){(t=r(6)(!1)).push([e.i,".modal--container{max-width:100%}@media (min-width:1024px){.modal--container{max-width:50%}.modal--container-lg{min-width:50%;max-width:100%}}",""]),e.exports=t},269:function(e,t,r){"use strict";r(144)},270:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--button{min-width:2.5rem}.builder--button-normal{padding:.5rem .75rem;font-size:1rem}.builder--button-small{padding:.25rem .5rem;font-size:.875rem}",""]),e.exports=t},271:function(e,t,r){"use strict";r(145)},272:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--button-group{margin:-.25rem}.builder--button-group .builder--button{margin:.25rem}",""]),e.exports=t},273:function(e,t,r){"use strict";r(146)},274:function(e,t,r){(t=r(6)(!1)).push([e.i,'.circle--button{padding:1rem;border-radius:50%;position:relative;display:flex;align-items:center;align-content:center;width:150px}.circle--button:after{content:"";display:block;padding-bottom:100%}',""]),e.exports=t},275:function(e,t,r){"use strict";r(147)},276:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--input-textarea{min-height:150px}",""]),e.exports=t},278:function(e,t,r){"use strict";r(148)},279:function(e,t,r){(t=r(6)(!1)).push([e.i,".builder--checkicon{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));--border-opacity:1;border-color:#000;border-color:rgba(0,0,0,var(--border-opacity));border-width:2px;display:flex;align-items:center;justify-content:center;cursor:pointer;height:2rem;width:2rem}.builder--checkicon input{display:none}",""]),e.exports=t},280:function(e,t,r){"use strict";r(149)},281:function(e,t,r){(t=r(6)(!1)).push([e.i,"",""]),e.exports=t},342:function(e,t,r){"use strict";r(159)},343:function(e,t,r){(t=r(6)(!1)).push([e.i,'.chat--container{position:fixed;right:0;bottom:0;margin:1rem;z-index:50}.chat--opener{position:relative;--bg-opacity:1;background-color:#007aff;background-color:rgba(0,122,255,var(--bg-opacity));padding:1rem;border-radius:.375rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));cursor:pointer}.chat--opener:after{position:absolute;display:block;width:0;height:0;content:"";right:2rem;bottom:-.5rem;border-left:.5rem solid transparent;border-right:2px solid transparent;border-top:.5rem solid #007aff}.chat--panel{display:flex;height:100%;align-items:stretch;flex-direction:column;border-radius:.375rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);border-width:2px;--border-opacity:1;border-color:#007aff;border-color:rgba(0,122,255,var(--border-opacity));overflow:hidden;width:300px;height:500px}.chat--header{display:flex;justify-content:space-between;--bg-opacity:1;background-color:#007aff;background-color:rgba(0,122,255,var(--bg-opacity));padding:1rem;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.chat--title{font-weight:700}.chat--controls{margin:-.25rem;display:flex;justify-content:space-between}.chat--controls-icon{margin:.25rem}.chat--close,.chat--restart{cursor:pointer}.chat--body{flex-grow:1;--bg-opacity:1;background-color:#f8f9fa;background-color:rgba(248,249,250,var(--bg-opacity));padding:.5rem;overflow-y:auto}.chat--spacer{padding-bottom:3rem}.chat--navigation{--bg-opacity:1;background-color:#007aff;background-color:rgba(0,122,255,var(--bg-opacity));padding:1rem;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.chat--typing{display:flex;margin-bottom:.5rem;margin-top:1rem}.chat--typing-circle{--bg-opacity:1;background-color:#6c757d;background-color:rgba(108,117,125,var(--bg-opacity));display:block;height:8px;width:8px;border-radius:50%;margin:2px;-webkit-animation:hat-typing-bounce .6s ease-in-out infinite;animation:hat-typing-bounce .6s ease-in-out infinite}.chat--typing-circle:first-child{-webkit-animation-delay:0ms;animation-delay:0ms}.chat--typing-circle:nth-child(2){-webkit-animation-delay:.2s;animation-delay:.2s}.chat--typing-circle:nth-child(3){-webkit-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes chat-typing-scale{0%{transform:scale(1)}33%{transform:scale(1)}50%{transform:scale(1.4)}to{transform:scale(1)}}@keyframes chat-typing-scale{0%{transform:scale(1)}33%{transform:scale(1)}50%{transform:scale(1.4)}to{transform:scale(1)}}@-webkit-keyframes hat-typing-bounce{0%{transform:translateY(0)}33%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}@keyframes hat-typing-bounce{0%{transform:translateY(0)}33%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}.chat--shake{-webkit-animation:shake 5s;animation:shake 5s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes shake{0%{transform:translate(0) rotate(0deg)}1%{transform:translate(-1px,-2px) rotate(-1deg)}2%{transform:translate(-3px) rotate(1deg)}3%{transform:translate(3px,2px) rotate(0deg)}4%{transform:translate(1px,-1px) rotate(1deg)}5%{transform:translate(-1px,2px) rotate(-1deg)}6%{transform:translate(-3px,1px) rotate(0deg)}7%{transform:translate(3px,1px) rotate(-1deg)}8%{transform:translate(-1px,-1px) rotate(1deg)}9%{transform:translate(1px,2px) rotate(0deg)}10%{transform:translate(0) rotate(0deg)}}@keyframes shake{0%{transform:translate(0) rotate(0deg)}1%{transform:translate(-1px,-2px) rotate(-1deg)}2%{transform:translate(-3px) rotate(1deg)}3%{transform:translate(3px,2px) rotate(0deg)}4%{transform:translate(1px,-1px) rotate(1deg)}5%{transform:translate(-1px,2px) rotate(-1deg)}6%{transform:translate(-3px,1px) rotate(0deg)}7%{transform:translate(3px,1px) rotate(-1deg)}8%{transform:translate(-1px,-1px) rotate(1deg)}9%{transform:translate(1px,2px) rotate(0deg)}10%{transform:translate(0) rotate(0deg)}}.chat--dot{position:absolute;top:-.5rem;left:-.5rem;--bg-opacity:1;background-color:#27a844;background-color:rgba(39,168,68,var(--bg-opacity));height:1rem;width:1rem;border-radius:50%}',""]),e.exports=t},344:function(e,t,r){"use strict";r(160)},345:function(e,t,r){(t=r(6)(!1)).push([e.i,".chat--message{width:100%;display:flex;flex-direction:column}.chat--message-bubble{--bg-opacity:1;background-color:#6c757d;background-color:rgba(108,117,125,var(--bg-opacity));padding:.5rem;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));font-size:.875rem;margin-bottom:.5rem;display:inline-block;width:auto;position:relative}.chat--message-bubble-local{border-radius:.5rem .5rem 0 .5rem;align-self:flex-end}.chat--message-bubble-remote{border-radius:.5rem .5rem .5rem 0;align-self:flex-start}",""]),e.exports=t},346:function(e,t,r){"use strict";r(161)},347:function(e,t,r){(t=r(6)(!1)).push([e.i,".chat--button{border-radius:.25rem;flex-grow:1}.chat--button-normal{font-size:.875rem;padding:.5rem;min-width:2.5rem}.chat--button-small{font-size:.75rem;padding:.25rem;min-width:1.5rem}.chat--button-primary{--bg-opacity:1;background-color:#007aff;background-color:rgba(0,122,255,var(--bg-opacity));--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.chat--button-secondary{--bg-opacity:1;background-color:#f8f9fa;background-color:rgba(248,249,250,var(--bg-opacity));--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}",""]),e.exports=t},348:function(e,t,r){"use strict";r(162)},349:function(e,t,r){(t=r(6)(!1)).push([e.i,".chat--button-group{margin:-.25rem;display:flex;flex-wrap:wrap;align-items:stretch}.chat--button-group .chat--button{margin:.25rem}",""]),e.exports=t},350:function(e,t,r){"use strict";r(163)},351:function(e,t,r){(t=r(6)(!1)).push([e.i,".chat--content p{margin-bottom:.5rem}.chat--content p:last-child{margin-bottom:0}.chat--content a{text-decoration:underline}.chat--content strong{font-weight:700}.chat--content ol,.chat--content ul{margin-left:1rem}.chat--content ul li{list-style:disc}.chat--content ol li{list-style:decimal}.chat--content h1{font-size:1.5rem}.chat--content h2{font-size:1.25rem}.chat--content h3{font-size:1.125rem}.chat--content h4{font-size:1rem}.chat--content h5{font-size:.875rem}.chat--content h6{font-size:.75rem}",""]),e.exports=t},355:function(e,t,r){"use strict";r(165)},356:function(e,t,r){(t=r(6)(!1)).push([e.i,".chat--input{width:100%;--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity));padding:.5rem}.chat--invalid{border-width:2px;--border-opacity:1;border-color:#e03347;border-color:rgba(224,51,71,var(--border-opacity))}.chat-checkinput,.chat-checkinput--box{display:flex;align-items:center}.chat-checkinput--box{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));flex-shrink:0;flex-grow:0;justify-content:center;cursor:pointer;margin-right:.5rem;height:1rem;width:1rem;padding:.05rem}.chat-checkinput--icon{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.chat-checkinput--checkbox{display:none}.chat--shake{-webkit-animation:shake 5s;animation:shake 5s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes shake{0%{transform:translate(0) rotate(0deg)}1%{transform:translate(-1px,-2px) rotate(-1deg)}2%{transform:translate(-3px) rotate(1deg)}3%{transform:translate(3px,2px) rotate(0deg)}4%{transform:translate(1px,-1px) rotate(1deg)}5%{transform:translate(-1px,2px) rotate(-1deg)}6%{transform:translate(-3px,1px) rotate(0deg)}7%{transform:translate(3px,1px) rotate(-1deg)}8%{transform:translate(-1px,-1px) rotate(1deg)}9%{transform:translate(1px,2px) rotate(0deg)}10%{transform:translate(0) rotate(0deg)}}@keyframes shake{0%{transform:translate(0) rotate(0deg)}1%{transform:translate(-1px,-2px) rotate(-1deg)}2%{transform:translate(-3px) rotate(1deg)}3%{transform:translate(3px,2px) rotate(0deg)}4%{transform:translate(1px,-1px) rotate(1deg)}5%{transform:translate(-1px,2px) rotate(-1deg)}6%{transform:translate(-3px,1px) rotate(0deg)}7%{transform:translate(3px,1px) rotate(-1deg)}8%{transform:translate(-1px,-1px) rotate(1deg)}9%{transform:translate(1px,2px) rotate(0deg)}10%{transform:translate(0) rotate(0deg)}}",""]),e.exports=t},72:function(e){e.exports=JSON.parse('{"a":"0.0.1"}')},98:function(e,t,r){"use strict";var n=r(3),o=(r(12),r(28),r(5)),l=(r(37),r(122),r(13)),c=r(14),d=r(169),h=r.n(d),m=function(){function e(t,r){Object(l.a)(this,e),this.broadcast=r,this.subscriberName=t,this.events={}}return Object(c.a)(e,[{key:"on",value:function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t)}},{key:"emit",value:function(e,t){this.broadcast.distribute(e,t,this)}},{key:"receive",value:function(e,t){if(void 0!==this.events[e])for(var i in this.events[e])this.events[e][i](t)}}]),e}(),f=function(){function e(){Object(l.a)(this,e),this.subscribers={}}return Object(c.a)(e,[{key:"distribute",value:function(e,t,r){for(var s in this.subscribers)r.subscriberName!=this.subscribers[s].subscriberName&&this.subscribers[s].receive(e,t)}},{key:"subscribe",value:function(e){return this.subscribers[e]=new m(e,this),this.subscribers[e]}}]),e}(),v=f,x=r(170),y=r.n(x),w=function(){function e(){Object(l.a)(this,e),this.dependencies={},this.broadcast=new v,this.subscriber=this.broadcast.subscribe("wanderer"),this.provide("broadcast",this.broadcast)}var t,r,n,d;return Object(c.a)(e,[{key:"use",value:function(e){void 0!==e.install&&e.install(this)}},{key:"provide",value:function(e,t){this.dependencies[e]=t}},{key:"require",value:function(e){if(void 0!==this.dependencies[e])return this.dependencies[e];throw'The dependency "'+e+'" is required! Please provide it first!'}},{key:"getRandomId",value:function(){return h()()}},{key:"regenerateJsonDataIds",value:function(data){var e=JSON.stringify(data);for(var i in data.vertices){var t=data.vertices[i]._id,r=this.getRandomId(),n=new RegExp(t,"g");e=e.replace(n,r)}for(var o in data.edges){var l=data.edges[o]._id,c=this.getRandomId(),d=new RegExp(l,"g");e=e.replace(d,c)}return JSON.parse(e)}},{key:"checkImportData",value:function(data){for(var e in data.vertices)if("flow"==data.vertices[e]._collection&&"wanderer.ai"==data.vertices[e].builder)return!0}},{key:"loadFromData",value:function(data){for(var e in this.checkImportData(data),data.vertices)this.subscriber.emit("addVertexFromData",data.vertices[e]);for(var t in data.edges)this.subscriber.emit("addEdgeFromData",data.edges[t])}},{key:"fetchFromFile",value:(d=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(t){try{var data=JSON.parse(t.target.result);e(data)}catch(t){r("This file is not a wanderer .json file! "+t)}},n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"loadFromFile",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFromFile(t);case 2:data=e.sent,this.subscriber.emit("truncate"),this.loadFromData(data),this.subscriber.emit("setCurrentUrl","");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchFromUrl",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){y.a.get(t).catch((function(e){r("The requested file was not found: "+e.message)})).then((function(t){try{e(t.data)}catch(e){r(e)}}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"loadFromUrl",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFromUrl(t);case 2:data=e.sent,this.subscriber.emit("truncate"),this.loadFromData(data),this.subscriber.emit("setCurrentUrl",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"startEmptyProject",value:function(){this.subscriber.emit("truncate"),this.loadFromData(this.regenerateJsonDataIds({vertices:[{_collection:"flow",_id:"d3fab08d-e05e-4885-8eba-f1e86a374c98",_origin:!0,_x:0,_y:0,languages:["en","de"],topic:{en:"New chat flow",de:"Neuer Chat-Flow"},author:"Unknown",license:"MIT",builder:"wanderer.ai",target:"web",version:this.version,time:""}]})),this.subscriber.emit("setCurrentUrl","")}},{key:"getLanguages",value:function(){return{aa:{name:"Afar"},ab:{name:"Abkhazian"},af:{name:"Afrikaans"},am:{name:"Amharic"},ar:{name:"Arabic"},as:{name:"Assamese"},ay:{name:"Aymara"},az:{name:"Azerbaijani"},ba:{name:"Bashkir"},be:{name:"Byelorussian"},bg:{name:"Bulgarian"},bh:{name:"Bihari"},bi:{name:"Bislama"},bn:{name:"Bengali"},bo:{name:"Tibetan"},br:{name:"Breton"},ca:{name:"Catalan"},co:{name:"Corsican"},cs:{name:"Czech"},cy:{name:"Welch"},da:{name:"Danish"},de:{name:"German"},dz:{name:"Bhutani"},el:{name:"Greek"},en:{name:"English"},eo:{name:"Esperanto"},es:{name:"Spanish"},et:{name:"Estonian"},eu:{name:"Basque"},fa:{name:"Persian"},fi:{name:"Finnish"},fj:{name:"Fiji"},fo:{name:"Faeroese"},fr:{name:"French"},fy:{name:"Frisian"},ga:{name:"Irish"},gd:{name:"Scots Gaelic"},gl:{name:"Galician"},gn:{name:"Guarani"},gu:{name:"Gujarati"},ha:{name:"Hausa"},hi:{name:"Hindi"},he:{name:"Hebrew"},hr:{name:"Croatian"},hu:{name:"Hungarian"},hy:{name:"Armenian"},ia:{name:"Interlingua"},id:{name:"Indonesian"},ie:{name:"Interlingue"},ik:{name:"Inupiak"},in:{name:"former Indonesian"},is:{name:"Icelandic"},it:{name:"Italian"},iu:{name:"Inuktitut (Eskimo)"},iw:{name:"former Hebrew"},ja:{name:"Japanese"},ji:{name:"former Yiddish"},jw:{name:"Javanese"},ka:{name:"Georgian"},kk:{name:"Kazakh"},kl:{name:"Greenlandic"},km:{name:"Cambodian"},kn:{name:"Kannada"},ko:{name:"Korean"},ks:{name:"Kashmiri"},ku:{name:"Kurdish"},ky:{name:"Kirghiz"},la:{name:"Latin"},ln:{name:"Lingala"},lo:{name:"Laothian"},lt:{name:"Lithuanian"},lv:{name:"Latvian, Lettish"},mg:{name:"Malagasy"},mi:{name:"Maori"},mk:{name:"Macedonian"},ml:{name:"Malayalam"},mn:{name:"Mongolian"},mo:{name:"Moldavian"},mr:{name:"Marathi"},ms:{name:"Malay"},mt:{name:"Maltese"},my:{name:"Burmese"},na:{name:"Nauru"},ne:{name:"Nepali"},nl:{name:"Dutch"},no:{name:"Norwegian"},oc:{name:"Occitan"},om:{name:"(Afan) Oromo"},or:{name:"Oriya"},pa:{name:"Punjabi"},pl:{name:"Polish"},ps:{name:"Pashto, Pushto"},pt:{name:"Portuguese"},qu:{name:"Quechua"},rm:{name:"Rhaeto-Romance"},rn:{name:"Kirundi"},ro:{name:"Romanian"},ru:{name:"Russian"},rw:{name:"Kinyarwanda"},sa:{name:"Sanskrit"},sd:{name:"Sindhi"},sg:{name:"Sangro"},sh:{name:"Serbo-Croatian"},si:{name:"Singhalese"},sk:{name:"Slovak"},sl:{name:"Slovenian"},sm:{name:"Samoan"},sn:{name:"Shona"},so:{name:"Somali"},sq:{name:"Albanian"},sr:{name:"Serbian"},ss:{name:"Siswati"},st:{name:"Sesotho"},su:{name:"Sudanese"},sv:{name:"Swedish"},sw:{name:"Swahili"},ta:{name:"Tamil"},te:{name:"Tegulu"},tg:{name:"Tajik"},th:{name:"Thai"},ti:{name:"Tigrinya"},tk:{name:"Turkmen"},tl:{name:"Tagalog"},tn:{name:"Setswana"},to:{name:"Tonga"},tr:{name:"Turkish"},ts:{name:"Tsonga"},tt:{name:"Tatar"},tw:{name:"Twi"},ug:{name:"Uigur"},uk:{name:"Ukrainian"},ur:{name:"Urdu"},uz:{name:"Uzbek"},vi:{name:"Vietnamese"},vo:{name:"Volapuk"},wo:{name:"Wolof"},xh:{name:"Xhosa"},yi:{name:"Yiddish"},yo:{name:"Yoruba"},za:{name:"Zhuang"},zh:{name:"Chinese"},zu:{name:"Zulu"}}}}]),e}(),V=function(){function e(t,r,n,o){var c=this;Object(l.a)(this,e),this.wanderer=t,this.broadcast=r,this.vue=n,this.store=o,this.subscriber=this.broadcast.subscribe("vueGraph"),this.subscriber.on("truncate",(function(){c.store.commit("wandererGraph/truncate")})),this.subscriber.on("resetLifecycle",(function(){c.store.commit("wandererGraph/cleanVertexLifecycleData")})),this.subscriber.on("addVertexFromData",(function(e){c.store.commit("wandererGraph/addVertex",e)})),this.subscriber.on("addEdgeFromData",(function(e){c.store.commit("wandererGraph/addEdge",e)})),this.subscriber.on("removeVertexById",(function(e){c.store.commit("wandererGraph/removeVertex",e)})),this.subscriber.on("removeEdgeById",(function(e){c.store.commit("wandererGraph/removeEdge",e)})),this.subscriber.on("setVertexDataValue",(function(data){c.store.commit("wandererGraph/setVertexDataValue",data)})),this.subscriber.on("setEdgeDataValue",(function(data){c.store.commit("wandererGraph/setEdgeDataValue",data)})),this.subscriber.on("setVertexLifecycleValue",(function(data){c.store.commit("wandererGraph/setVertexLifecycleValue",data)})),this.subscriber.on("setTraversedVertices",(function(data){c.store.commit("wandererGraph/setTraversedVertices",data)})),this.subscriber.on("setTraversedEdges",(function(data){c.store.commit("wandererGraph/setTraversedEdges",data)}))}return Object(c.a)(e,[{key:"enableLanguage",value:function(e){this.store.commit("wandererGraph/enableLanguage",e)}},{key:"disableLanguage",value:function(e){this.store.commit("wandererGraph/disableLanguage",e)}},{key:"getOriginVertexId",value:function(){return this.store.state.wandererGraph.originVertexId}},{key:"removeVertex",value:function(e){this.store.commit("wandererGraph/removeVertex",e),this.subscriber.emit("removeVertex",e)}},{key:"removeEdge",value:function(e){this.store.commit("wandererGraph/removeEdge",e),this.subscriber.emit("removeEdge",e)}},{key:"getAllVertexData",value:function(){return this.store.state.wandererGraph.vertexDocumentData}},{key:"getAllEdgeData",value:function(){return this.store.state.wandererGraph.edgeDocumentData}},{key:"getVertexDataById",value:function(e){return this.store.state.wandererGraph.vertexDocumentData[e]}},{key:"getEdgeDataById",value:function(e){return this.store.state.wandererGraph.edgeDocumentData[e]}},{key:"getOriginDataValue",value:function(e,t){return this.getVertexDataValue(this.getOriginVertexId(),e,t)}},{key:"getVertexDataValue",value:function(e,t,r){if(void 0!==this.store.state.wandererGraph.vertexDocumentData[e]&&void 0!==this.store.state.wandererGraph.vertexDocumentData[e][t]){if(void 0===r)return this.store.state.wandererGraph.vertexDocumentData[e][t];if(void 0!==this.store.state.wandererGraph.vertexDocumentData[e][t][r])return this.store.state.wandererGraph.vertexDocumentData[e][t][r]}}},{key:"setVertexDataValue",value:function(e,t,r,n){void 0!==r&&(this.store.commit("wandererGraph/setVertexDataValue",{id:e,key:t,value:r,language:n}),this.subscriber.emit("setVertexDataValue",{id:e,key:t,value:r,language:n}))}},{key:"getEdgeDataValue",value:function(e,t,r){if(void 0!==this.store.state.wandererGraph.edgeDocumentData[e]&&void 0!==this.store.state.wandererGraph.edgeDocumentData[e][t]){if(void 0===r)return this.store.state.wandererGraph.edgeDocumentData[e][t];if(void 0!==this.store.state.wandererGraph.edgeDocumentData[e][t][r])return this.store.state.wandererGraph.edgeDocumentData[e][t][r]}}},{key:"setEdgeDataValue",value:function(e,t,r,n){void 0!==r&&(this.store.commit("wandererGraph/setEdgeDataValue",{id:e,key:t,value:r,language:n}),this.subscriber.emit("setEdgeDataValue",{id:e,key:t,value:r,language:n}))}},{key:"getVertexLifecycleValuesById",value:function(e){return this.store.state.wandererGraph.vertexLifecycleData[e]}},{key:"getVertexLifecycleValue",value:function(e,t){if(void 0!==this.store.state.wandererGraph.vertexLifecycleData[e]&&void 0!==this.store.state.wandererGraph.vertexLifecycleData[e][t])return this.store.state.wandererGraph.vertexLifecycleData[e][t]}},{key:"setVertexLifecycleValue",value:function(e,t,r){void 0!==r&&(this.store.commit("wandererGraph/setVertexLifecycleValue",{id:e,key:t,value:r}),this.subscriber.emit("setVertexLifecycleValue",{id:e,key:t,value:r}))}}]),e}(),_={install:function(e){var t=e.require("vue"),r=e.require("broadcast"),n=e.require("store");n.registerModule("wandererGraph",{namespaced:!0,state:{originVertexId:"",vertexDocumentIds:[],vertexDocumentData:{},edgeDocumentIds:[],edgeDocumentData:{},vertexLifecycleData:{},traversedVertices:[],traversedEdges:[]},mutations:{addVertex:function(e,t){e.vertexDocumentIds.push(t._id),this._vm.$set(e.vertexDocumentData,t._id,t),null==t._foreign&&void 0!==t._origin&&t._origin&&(e.originVertexId=t._id)},removeVertex:function(e,t){e.vertexDocumentIds.splice(e.vertexDocumentIds.indexOf(t),1),this._vm.$delete(e.vertexDocumentData,t)},addEdge:function(e,t){e.edgeDocumentIds.push(t._id),this._vm.$set(e.edgeDocumentData,t._id,t)},removeEdge:function(e,t){e.edgeDocumentIds.splice(e.edgeDocumentIds.indexOf(t),1),this._vm.$delete(e.edgeDocumentData,t)},setVertexDataValue:function(e,t){var r=t.id,n=t.key,o=t.value,l=t.language;void 0!==l?(null==e.vertexDocumentData[r][n]&&this._vm.$set(e.vertexDocumentData[r],n,{}),this._vm.$set(e.vertexDocumentData[r][n],l,o)):this._vm.$set(e.vertexDocumentData[r],n,o)},setEdgeDataValue:function(e,t){var r=t.id,n=t.key,o=t.value,l=t.language;void 0!==l?this._vm.$set(e.edgeDocumentData[r][n],l,o):this._vm.$set(e.edgeDocumentData[r],n,o)},setVertexLifecycleValue:function(e,t){var r=t.id,n=t.key,o=t.value;null==e.vertexLifecycleData[r]&&this._vm.$set(e.vertexLifecycleData,r,{}),this._vm.$set(e.vertexLifecycleData[r],n,o)},cleanVertexLifecycleData:function(e){this._vm.$set(e,"vertexLifecycleData",{})},enableLanguage:function(e,t){e.vertexDocumentData[e.originVertexId].languages.push(t)},disableLanguage:function(e,t){e.vertexDocumentData[e.originVertexId].languages.splice(e.vertexDocumentData[e.originVertexId].languages.indexOf(t),1)},setTraversedVertices:function(e,t){this._vm.$set(e,"traversedVertices",t)},setTraversedEdges:function(e,t){this._vm.$set(e,"traversedEdges",t)},truncate:function(e){this._vm.$set(e,"originVertexId",""),this._vm.$set(e,"vertexDocumentIds",[]),this._vm.$set(e,"vertexDocumentData",{}),this._vm.$set(e,"edgeDocumentIds",[]),this._vm.$set(e,"edgeDocumentData",{}),this._vm.$set(e,"vertexLifecycleData",{}),this._vm.$set(e,"traversedVertices",[]),this._vm.$set(e,"traversedEdges",[])}}});var o=new V(e,r,t,n);e.provide("vueGraph",o),t.prototype.$wanderer=e,t.prototype.$vueGraph=o}},C=r(171),k=r.n(C),D=(r(89),{computed:{name:function(){return this.$builder.getTranslatableOriginDataValue("topic")}}}),I=r(0),component=Object(I.a)(D,(function(){var e=this.$createElement,t=this._self._c||e;return t("nav",{staticClass:"flex p-4 justify-between items-center bg-gray shadow-lg"},[this._m(0),this._v(" "),t("div",{},[this._v("\n    "+this._s(this.name)+"\n  ")]),this._v(" "),t("span",{},[t("portal-target",{attrs:{tag:"builder-button-group",name:"actionbar",multiple:""}})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"text-xl"},[this._v("Wanderer.ai")]),this._v(" "),t("div",{staticClass:"text-sm"},[this._v("Conversation Builder")])])}],!1,null,null,null),$=component.exports,E={mounted:function(){this.$builder.initCytoscape({container:document.getElementById("cy"),zoom:1,pan:{x:0,y:0},minZoom:.3,maxZoom:3,zoomingEnabled:!0,userZoomingEnabled:!0,panningEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!0,selectionType:"single",touchTapThreshold:8,desktopTapThreshold:4,autolock:!1,autoungrabify:!1,autounselectify:!1,headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,wheelSensitivity:.1,pixelRatio:"auto"})}},B=E,M=(r(236),Object(I.a)(B,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"cy"}})}),[],!1,null,null,null)),T=M.exports,L={computed:{alerts:function(){return this.$store.state.wandererBuilder.alerts}}},S=(r(238),Object(I.a)(L,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"builder--alerts"},e._l(e.alerts,(function(t){return r("div",{key:e.alerts.indexOf(t),staticClass:"p-4 rounded-lg mb-4 text-white",class:{"bg-red":"error"==t.type,"bg-yellow":"info"==t.type,"bg-green":"success"==t.type}},[e._v("\n    "+e._s(t.message)+"\n  ")])})),0)}),[],!1,null,null,null)),G=S.exports,O=(r(240),r(1)),j=r(72),A={components:{Icon:O.a},data:function(){return{showModal:!1}},computed:{version:function(){return j.a}}},F=A,P=Object(I.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"actionbar",order:1}},[r("builder-button",{attrs:{color:"gray-dark",title:"Show Info"},on:{click:function(t){e.showModal=!0}}},[r("icon",{attrs:{name:"info"}})],1)],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{title:"Conversation Builder",show:e.showModal},on:{closeButton:function(t){e.showModal=!1}}},[r("builder-content",[r("p",[e._v("\n          Hey! This is a free service! Use it for commercial or private projects as long as you use it with the wanderer.ai domain.\n          If you want to run chatbots built with this software on your own domain, take a look at the\n          "),r("a",{attrs:{target:"_blank",href:"https://wanderer.ai/pricing/"}},[e._v("licensing model")]),e._v(".\n        ")]),e._v(" "),r("p",[e._v("\n          Are you interested in the technology behind?\n          Visit "),r("a",{attrs:{target:"_blank",href:"https://wanderer.ai"}},[e._v("Wanderer.ai")]),e._v(" and read "),r("a",{attrs:{target:"_blank",href:"https://steampixel.de/en/tag/lets-build-an-open-source-chatbot-builder/"}},[e._v("SteamPixel's blog series")]),e._v(" about this topic.\n        ")]),e._v(" "),r("p",[e._v("\n          Are you interested in developing applications like this? Are you an open source enthusiast?\n          Help me to improve this software!\n          Check out the "),r("a",{attrs:{target:"_blank",href:"https://github.com/wanderer-ai"}},[e._v("repositories")]),e._v(" or open a new issue on "),r("a",{attrs:{target:"_blank",href:"https://github.com/wanderer-ai"}},[e._v("GitHub")]),e._v(".\n        ")]),e._v(" "),r("p",[r("strong",[e._v("Important information:")]),e._v(" This software is currently in rapid development state. That means that some features will change very frequently.\n          At the moment you should not use Wanderer.ai for production projects!\n        ")]),e._v(" "),r("p",[e._v("\n          Version "+e._s(e.version)+"\n        ")])])],1)],1)],1)}),[],!1,null,null,null),z=P.exports,N=(r(139),{props:{size:{type:String,default:"normal"}},computed:{languages:function(){return this.$wanderer.getLanguages()},currentLanguage:function(){return this.$builder.getCurrentLanguage()},enabledLanguages:function(){var e=this.$vueGraph.getOriginDataValue("languages");return e||(e=[]),e}},methods:{localize:function(e){this.$builder.setCurrentLanguage(e),this.$emit("localized")}}}),R=N,U=Object(I.a)(R,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("builder-button-group",e._l(e.enabledLanguages,(function(t){return r("builder-button",{key:t,class:{"btn-primary":e.currentLanguage==t,"btn-secondary":e.currentLanguage!=t},attrs:{size:e.size},on:{click:function(r){return e.localize(t)}}},[e._v(e._s(e.languages[t].name))])})),1)}),[],!1,null,null,null),Q=U.exports,J={components:{Icon:O.a,LanguageSwitcher:Q},computed:{debug:function(){return this.$store.state.wandererBuilder.debug},showVertexEditorModal:function(){return 0!==this.$store.state.wandererBuilder.editVertex},editVertexCollection:function(){if(0!==this.$store.state.wandererBuilder.editVertex){var e=this.$builder.getVertexCollectionPropsById(this.$store.state.wandererBuilder.editVertex);if(e)return e.plain()}return!1},selectedVertices:function(){return this.$store.state.wandererBuilder.selectedVertexIds.length},selectedEdges:function(){return this.$store.state.wandererBuilder.selectedEdgeIds.length},idForeign:function(){if(0!==this.$store.state.wandererBuilder.editVertex)return this.$vueGraph.getVertexDataValue(this.$store.state.wandererBuilder.editVertex,"_foreign")},currentLanguage:function(){return this.$store.state.wandererBuilder.currentLanguage}},methods:{closeVertexEditorModal:function(){this.$builder.rebuildCytoscapeVertexById(this.$store.state.wandererBuilder.editVertex),this.$store.commit("wandererBuilder/setEditVertex",0)},openVertexEditorModal:function(){var e=this.$builder.getSelectedCytoscapeVertexIds();1===e.length&&this.$store.commit("wandererBuilder/setEditVertex",e[0])}}},Y=Object(I.a)(J,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"toolbar",order:1}},[1==e.selectedVertices&&0==e.selectedEdges?r("builder-button",{attrs:{title:"Edit vertex"},on:{click:function(t){return e.openVertexEditorModal()}}},[r("icon",{attrs:{name:"edit"}})],1):e._e()],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{size:"lg",title:e.editVertexCollection?e.editVertexCollection.label:"Unknown collection",show:e.showVertexEditorModal},on:{closeButton:function(t){return e.closeVertexEditorModal()}},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.editVertexCollection?r("language-switcher",{attrs:{size:"small"}}):e._e()]},proxy:!0}])},[e.idForeign?r("div",{staticClass:"mb-8 text-red",attrs:{role:"alert"}},[e._v("\n        Warning! This vertex is not part of the current flow! It was dynamically imported. You can edit this node. But it will not be saved into your flow!\n      ")]):e._e(),e._v(" "),e.editVertexCollection?e._e():r("div",{staticClass:"mb-8 text-red",attrs:{role:"alert"}},[e._v("\n        You cannot edit this vertex. This vertex is part of an unknown collection.\n      ")]),e._v(" "),e.debug?r("builder-text-input",{attrs:{label:"ID",disabled:!0},model:{value:e.$store.state.wandererBuilder.editVertex,callback:function(t){e.$set(e.$store.state.wandererBuilder,"editVertex",t)},expression:"$store.state.wandererBuilder.editVertex"}}):e._e(),e._v(" "),e.editVertexCollection?r(e.editVertexCollection.component,{tag:"component"}):e._e()],1)],1)],1)}),[],!1,null,null,null).exports,H={components:{Icon:O.a},computed:{debug:function(){return this.$store.state.wandererBuilder.debug},showEdgeEditorModal:function(){return 0!==this.$store.state.wandererBuilder.editEdge},editEdgeCollection:function(){return 0!==this.$store.state.wandererBuilder.editEdge&&this.$builder.getEdgeCollectionPropsById(this.$store.state.wandererBuilder.editEdge).plain()},selectedEdges:function(){return this.$store.state.wandererBuilder.selectedEdgeIds.length},selectedVertices:function(){return this.$store.state.wandererBuilder.selectedVertexIds.length},idForeign:function(){if(0!==this.$store.state.wandererBuilder.editEdge)return this.$vueGraph.getEdgeDataValue(this.$store.state.wandererBuilder.editEdge,"_foreign")}},methods:{closeEdgeEditorModal:function(){this.$builder.rebuildCytoscapeEdgeById(this.$store.state.wandererBuilder.editEdge),this.$store.commit("wandererBuilder/setEditEdge",0)},openEdgeEditorModal:function(){var e=this.$builder.getSelectedCytoscapeEdgeIds();1===e.length&&this.$store.commit("wandererBuilder/setEditEdge",e[0])}}},W=Object(I.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"toolbar",order:1}},[1==e.selectedEdges&&0==e.selectedVertices?r("builder-button",{attrs:{title:"Edit edge"},on:{click:function(t){return e.openEdgeEditorModal()}}},[r("icon",{attrs:{name:"edit"}})],1):e._e()],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{size:"lg",title:e.editEdgeCollection.label,show:e.showEdgeEditorModal},on:{closeButton:function(t){return e.closeEdgeEditorModal()}}},[e.idForeign?r("div",{staticClass:"mb-8 text-red",attrs:{role:"alert"}},[e._v("\n        Warning! This edge is not part of the current flow! It was dynamically imported. You can edit this edge. But it will not be saved into your flow!\n      ")]):e._e(),e._v(" "),e.editEdgeCollection?e._e():r("div",{staticClass:"mb-8 text-red",attrs:{role:"alert"}},[e._v("\n        You cannot edit this edge. This edge is part of an unknown collection.\n      ")]),e._v(" "),e.debug?r("builder-text-input",{attrs:{label:"ID",disabled:!0},model:{value:e.$store.state.wandererBuilder.editEdge,callback:function(t){e.$set(e.$store.state.wandererBuilder,"editEdge",t)},expression:"$store.state.wandererBuilder.editEdge"}}):e._e(),e._v(" "),r(e.editEdgeCollection.component,{tag:"component"})],1)],1)],1)}),[],!1,null,null,null).exports,K=(r(245),{components:{Icon:O.a},data:function(){return{showModal:!1}},mounted:function(){var component=this;document.addEventListener("keydown",(function(e){if(e.isComposing||46===e.keyCode)return!component.isEditVertexSet&&component.selectedVertexIds.length&&(component.showModal=!0),void(!component.isEditEdgeSet&&component.selectedEdgeIds.length&&(component.showModal=!0))})),document.addEventListener("keydown",(function(e){(e.isComposing||13===e.keyCode)&&component.showModal&&(component.removeEdges(),component.removeVertices(),component.unselect(),component.showModal=!1)}))},computed:{selectedVertexIds:function(){return this.$store.state.wandererBuilder.selectedVertexIds},selectedEdgeIds:function(){return this.$store.state.wandererBuilder.selectedEdgeIds},isEditVertexSet:function(){return 0!==this.$store.state.wandererBuilder.editVertex}},methods:{removeSelectedVertices:function(){this.removeVertices(),this.unselect()},removeVertices:function(){var e=this;this.showModal=!1;var t=this.$builder.getSelectedCytoscapeVertexIds();for(var i in t){this.$vueGraph.getVertexDataValue(t[i],"_origin")?this.$store.dispatch("wandererBuilder/addAlert",{message:"You cannot remove the origin node",type:"info"}):(this.$builder.cytoscape.getElementById(t[i]).connectedEdges().forEach((function(t){e.$wanderer.subscriber.emit("removeEdgeById",t.id())})),this.$wanderer.subscriber.emit("removeVertexById",t[i]))}},removeSelectedEdges:function(){this.removeEdges(),this.unselect()},removeEdges:function(){this.showModal=!1;var e=this.$builder.getSelectedCytoscapeEdgeIds();for(var i in e)this.$wanderer.subscriber.emit("removeEdgeById",e[i])},unselect:function(){this.$builder.unselect()},unlink:function(){var e=this;this.showModal=!1;var t=this.$builder.getSelectedCytoscapeVertexIds();for(var i in t)this.$builder.cytoscape.getElementById(t[i]).connectedEdges().forEach((function(t){e.$wanderer.subscriber.emit("removeEdgeById",t.id())}));this.$builder.unselect()}}}),Z=Object(I.a)(K,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"toolbar",order:2}},[e.selectedVertexIds.length||e.selectedEdgeIds.length?r("builder-button",{attrs:{color:"red",title:"Delete"},on:{click:function(t){e.showModal=!0}}},[r("icon",{attrs:{name:"trash"}})],1):e._e()],1),e._v(" "),r("portal",{attrs:{to:"modals",order:2}},[r("builder-modal",{attrs:{title:"Are you sure?",show:e.showModal},on:{closeButton:function(t){e.showModal=!1}}},[r("div",{staticClass:"mb-4"},[e._v("\n        Are you sure you want to delete the selected items?\n      ")]),e._v(" "),r("builder-button-group",[e.selectedVertexIds.length?r("builder-button",{staticClass:"btn btn-danger",attrs:{color:"red"},on:{click:function(t){return e.removeSelectedVertices()}}},[e._v("\n          Remove "+e._s(e.selectedVertexIds.length)+" vertices\n        ")]):e._e(),e._v(" "),e.selectedVertexIds.length?r("builder-button",{staticClass:"btn btn-danger",attrs:{color:"red"},on:{click:function(t){return e.unlink()}}},[e._v("\n          Unlink "+e._s(e.selectedVertexIds.length)+" vertices\n        ")]):e._e(),e._v(" "),e.selectedEdgeIds.length?r("builder-button",{staticClass:"btn btn-danger",attrs:{color:"red"},on:{click:function(t){return e.removeSelectedEdges()}}},[e._v("\n          Remove "+e._s(e.selectedEdgeIds.length)+" edges\n        ")]):e._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports,X=(r(246),{components:{Icon:O.a},data:function(){return{showModal:!1}},computed:{selectedVertexIds:function(){return this.$store.state.wandererBuilder.selectedVertexIds},selectedEdgeIds:function(){return this.$store.state.wandererBuilder.selectedEdgeIds},possibleEdgeCollections:function(){if(2==this.selectedVertexIds.length){var e=this.$vueGraph.getVertexDataValue(this.selectedVertexIds[0],"_collection"),t=this.$vueGraph.getVertexDataValue(this.selectedVertexIds[1],"_collection");if(void 0!==e&&void 0!==t)return this.$builder.getPossibleEdgeCollectionNames(e,t)}return!1}},methods:{connectCheck:function(){1==this.possibleEdgeCollections.length&&this.connect(this.possibleEdgeCollections[0]),this.possibleEdgeCollections.length>1&&(this.showModal=!0)},connect:function(e){this.showModal=!1,this.$builder.addEdge(e,this.selectedVertexIds[0],this.selectedVertexIds[1])}}}),ee=Object(I.a)(X,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"toolbar",order:2}},[e.possibleEdgeCollections.length&&0==e.selectedEdgeIds.length?r("builder-button",{attrs:{color:"yellow",title:"Connect"},on:{click:function(t){return e.connectCheck()}}},[r("icon",{attrs:{name:"link"}})],1):e._e()],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{title:"Connect",show:e.showModal},on:{closeButton:function(t){e.showModal=!1}}},[r("builder-button-group",[e._l(e.possibleEdgeCollections,(function(t){return[r("builder-button",{on:{click:function(r){return e.connect(t)}}},[e._v(e._s(t))])]}))],2)],1)],1)],1)}),[],!1,null,null,null).exports,te=(r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),{components:{Icon:O.a},props:{show:{type:Boolean,default:!1}},data:function(){return{showModal:this.show,url:"https://raw.githubusercontent.com/wanderer-ai/wanderer-flows/master/tutorial/intro/welcome.json"}},watch:{showModal:function(e){e&&this.$builder.unselect()}},computed:{vertexCount:function(){return this.$store.state.wandererGraph.vertexDocumentIds.length},fileName:function(){var e=this.$builder.getTranslatableOriginDataValue("topic");return e||(e="untitled.json"),e.replace(/[^\w.]+/g,"_").toLowerCase()+".json"},version:function(){return j.a}},methods:{startTutorial:function(){this.showModal=!1;this.$wanderer.loadFromUrl("https://raw.githubusercontent.com/wanderer-ai/wanderer-flows/master/tutorial/intro/welcome.json"),this.$store.commit("wandererBuilder/setTutorialMode",!0),this.$store.commit("wandererChat/setVisible",!0)},viewExamples:function(){this.showModal=!1,this.$wanderer.loadFromUrl("https://raw.githubusercontent.com/wanderer-ai/wanderer-flows/master/examples/examples.json"),this.$store.commit("wandererBuilder/setTutorialMode",!0),this.$store.commit("wandererChat/setVisible",!0)},startEmptyProject:function(){this.$wanderer.startEmptyProject(),this.$store.commit("wandererBuilder/setTutorialMode",!1),this.showModal=!1},loadFromUrl:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$wanderer.loadFromUrl(e);case 3:t.$store.commit("wandererBuilder/setTutorialMode",!1),t.showModal=!1,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t.$store.dispatch("wandererBuilder/addAlert",{message:r.t0,type:"error"});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},loadFromFile:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.target.files[0],r.prev=1,r.next=4,t.$wanderer.loadFromFile(n);case 4:t.$store.commit("wandererBuilder/setTutorialMode",!1),t.showModal=!1,r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),t.$store.dispatch("wandererBuilder/addAlert",{message:r.t0,type:"error"});case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},downloadFile:function(){var e=this.$builder.generateExportData(),element=document.createElement("a");element.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2))),element.setAttribute("download",this.fileName),element.style.display="none",document.body.appendChild(element),element.click(),document.body.removeChild(element),this.showModal=!1}}}),ae=(r(255),Object(I.a)(te,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"actionbar",order:1}},[r("builder-button",{attrs:{color:"gray-dark",title:"Save or restore a project"},on:{click:function(t){e.showModal=!0}}},[r("icon",{attrs:{name:"save"}})],1)],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{showHeader:!0,title:"Project",showFooter:!0,showClose:e.vertexCount>0,show:e.showModal},on:{closeButton:function(t){e.showModal=!1}}},[r("div",{staticClass:"flex flex-col"},[r("builder-button",{staticClass:"mb-4",attrs:{color:"green"},on:{click:function(t){return e.startTutorial()}}},[r("div",{staticClass:"flex w-full justify-between items-center"},[r("icon",{attrs:{name:"robot"}}),e._v(" "),r("span",[e._v("Start tutorial bot")]),e._v(" "),r("icon",{attrs:{name:"arrow-right"}})],1)]),e._v(" "),e.vertexCount?r("builder-button",{staticClass:"mb-4",attrs:{color:"yellow"},on:{click:function(t){return e.downloadFile()}}},[r("div",{staticClass:"flex w-full justify-between items-center"},[r("icon",{attrs:{name:"download"}}),e._v(" "),r("span",[e._v("Download project")]),e._v(" "),r("icon",{attrs:{name:"arrow-right"}})],1)]):e._e(),e._v(" "),r("builder-button",{staticClass:"mb-4",on:{click:function(t){return e.startEmptyProject()}}},[r("div",{staticClass:"flex w-full justify-between items-center"},[r("icon",{attrs:{name:"file"}}),e._v(" "),r("span",[e._v("New project")]),e._v(" "),r("icon",{attrs:{name:"arrow-right"}})],1)]),e._v(" "),r("builder-button",{staticClass:"mb-4 upload--button"},[r("div",[r("div",{staticClass:"flex w-full justify-between items-center"},[r("icon",{attrs:{name:"upload"}}),e._v(" "),r("span",[e._v("Restore from file")]),e._v(" "),r("icon",{attrs:{name:"arrow-right"}})],1),e._v(" "),r("input",{attrs:{type:"file"},on:{change:e.loadFromFile}})])]),e._v(" "),r("builder-button",{staticClass:"w-full",on:{click:function(t){return e.loadFromUrl(e.url)}}},[r("div",{staticClass:"flex w-full justify-between items-center"},[r("icon",{attrs:{name:"globe"}}),e._v(" "),r("span",[e._v("Restore from URL")]),e._v(" "),r("icon",{attrs:{name:"arrow-right"}})],1)]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"rounded w-full py-2 px-4 text-gray-700 leading-tight border-2 border-blue",attrs:{type:"text"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}})],1)])],1)],1)}),[],!1,null,null,null).exports),re=(r(257),{components:{Icon:O.a,LanguageSwitcher:Q},data:function(){return{showModal:!1,showMore:!1}},computed:{languages:function(){return this.$wanderer.getLanguages()},currentLanguage:function(){return this.$builder.getCurrentLanguage()},enabledLanguages:function(){var e=this.$vueGraph.getOriginDataValue("languages");return e||(e=[]),e}},methods:{toggleMore:function(){this.showMore?this.showMore=!1:this.showMore=!0},toggle:function(e,t){t.target.checked?this.$vueGraph.enableLanguage(e):this.$vueGraph.disableLanguage(e)}}}),ne=Object(I.a)(re,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"actionbar",order:1}},[r("builder-button",{attrs:{color:"gray-dark",title:"Switch language"},on:{click:function(t){e.showModal=!0}}},[r("icon",{attrs:{name:"flag"}})],1)],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{title:"Manage languages",show:e.showModal},on:{closeButton:function(t){e.showModal=!1}},scopedSlots:e._u([{key:"buttons",fn:function(){return[r("builder-button",{attrs:{color:"gray-dark",size:"small"},on:{click:e.toggleMore}},[r("div",{staticClass:"flex items-center justify-between"},[r("icon",{staticClass:"mr-2",attrs:{name:"flag"}}),e._v(" "),r("span",[e._v("More languages")])],1)])]},proxy:!0}])},[r("language-switcher",{on:{localized:function(t){e.showModal=!1}}}),e._v(" "),e.showMore?r("div",{staticClass:"pt-4 flex flex-wrap"},e._l(e.languages,(function(t,code){return r("label",{key:code,staticClass:"mr-4"},[r("input",{attrs:{type:"checkbox",value:"true"},domProps:{checked:e.enabledLanguages.includes(code)},on:{click:function(t){return e.toggle(code,t)}}}),e._v(" "),r("span",[e._v(e._s(t.name))])])})),0):e._e()],1)],1)],1)}),[],!1,null,null,null).exports,se=(r(258),{data:function(){return{showModal:!1}},components:{Icon:O.a},computed:{selectedVertexIds:function(){return this.$store.state.wandererBuilder.selectedVertexIds},selectedEdgeIds:function(){return this.$store.state.wandererBuilder.selectedEdgeIds},possibleOutgoingCollections:function(){if(1==this.selectedVertexIds.length){var e=this.$vueGraph.getVertexDataValue(this.selectedVertexIds[0],"_collection"),t=this.$builder.getPossibleOutgoingCollections(e);if(t)return t=t.plain(),t}},possibleVertexCollections:function(){var e=this.$builder.getAllVertexCollectionProps();if(e)return e=e.plain()}},methods:{append:function(e,t){this.$builder.appendVertex(this.selectedVertexIds[0],e,t),this.showModal=!1},add:function(e){var t=Math.floor(101*Math.random()+100),r=Math.floor(101*Math.random()+100);this.$builder.addVertex(e,t,r),this.showModal=!1}}}),ie=Object(I.a)(se,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("portal",{attrs:{to:"toolbar",order:3}},[0==e.selectedVertexIds.length||1==e.selectedVertexIds.length&&0==e.selectedEdgeIds.length?r("builder-button",{attrs:{color:"yellow",title:"Add vertex"},on:{click:function(t){e.showModal=!0}}},[r("icon",{attrs:{name:"plus"}})],1):e._e()],1),e._v(" "),r("portal",{attrs:{to:"modals",order:1}},[r("builder-modal",{attrs:{title:"Add vertex",show:e.showModal},on:{closeButton:function(t){e.showModal=!1}}},[0==e.selectedVertexIds.length?r("builder-button-group",e._l(e.possibleVertexCollections,(function(t,n){return t.creatable?r("builder-button",{key:n,style:"background-color:"+t.color+";",on:{click:function(t){return e.add(n)}}},[r("div",{staticClass:"flex justify-between items-center"},[r("icon",{staticClass:"mr-2",attrs:{name:"plus"}}),e._v(" "),r("span",{},[e._v(e._s(t.label))])],1)]):e._e()})),1):e._e(),e._v(" "),r("builder-button-group",[e._l(e.possibleOutgoingCollections,(function(t){return 1==e.selectedVertexIds.length?e._l(t.through,(function(n,o){return r("builder-button",{key:o,style:"background-color:"+t.to.collection.color+";",on:{click:function(r){return e.append(t.to.name,o)}}},[r("div",{staticClass:"flex justify-between items-center"},[r("icon",{staticClass:"mr-2",attrs:{name:"plus"}}),e._v(" "),r("span",[e._v(e._s(n.label)+" "+e._s(t.to.collection.label))])],1)])})):e._e()}))],2)],1)],1)],1)}),[],!1,null,null,null).exports,oe=(r(259),{components:{Icon:O.a},computed:{tutorialMode:function(){return this.$store.state.wandererBuilder.tutorialMode},currentFlowUrl:function(){return this.$store.state.wandererBuilder.currentFlowUrl}},methods:{reload:function(){this.$wanderer.loadFromUrl(this.currentFlowUrl)}}}),le={name:"App",components:{Toolbar:$,Cytoscape:T,Alerts:G,InfoTool:z,EditVertexTool:Y,EditEdgeTool:W,RemoveTool:Z,ConnectTool:ee,FileTool:ae,LanguageTool:ne,AddVertexTool:ie,ReloadTool:Object(I.a)(oe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("portal",{attrs:{to:"actionbar",order:1}},[this.tutorialMode?t("builder-button",{attrs:{color:"green",title:"Reload Tutorial"},on:{click:this.reload}},[t("icon",{attrs:{name:"sync"}})],1):this._e()],1)],1)}),[],!1,null,null,null).exports},data:function(){return{showChatPanel:!1,showFileTool:!0}},mounted:function(){var e=new URLSearchParams(window.location.search).get("flow");e&&(this.$wanderer.loadFromUrl(e),this.$store.commit("wandererChat/setVisible",!0),this.showFileTool=!1)},methods:{}},ce=(r(260),Object(I.a)(le,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"flex flex-col relative z-10 h-screen"},[r("div",{},[r("toolbar")],1),e._v(" "),r("div",{staticClass:"flex-grow flex-shrink overflow-hidden relative "},[r("div",{staticClass:"builder--toolbar absolute z-30 top-2 left-2"},[r("portal-target",{attrs:{tag:"builder-button-group",name:"toolbar",multiple:""}})],1),e._v(" "),r("cytoscape")],1)]),e._v(" "),r("portal-target",{staticClass:"relative z-50",attrs:{name:"modals",multiple:""}}),e._v(" "),r("alerts"),e._v(" "),r("file-tool",{attrs:{show:e.showFileTool},on:{startTutorial:function(t){return e.startTutorial()},viewExamples:function(t){return e.viewExamples()}}}),e._v(" "),r("info-tool"),e._v(" "),r("edit-vertex-tool"),e._v(" "),r("edit-edge-tool"),e._v(" "),r("remove-tool"),e._v(" "),r("connect-tool"),e._v(" "),r("language-tool"),e._v(" "),r("reload-tool"),e._v(" "),r("add-vertex-tool"),e._v(" "),r("wanderer-chat")],1)}),[],!1,null,null,null).exports),ue=(r(29),r(45),r(20),r(97)),de=r.n(ue),he=r(172),pe=r.n(he),ge=r(24),me=(r(88),function(){function e(data){Object(l.a)(this,e),void 0===data&&(data={}),this.data=data}return Object(c.a)(e,[{key:"objectifier",value:function(e,t){for(var s,r=t,i=0;r&&(s=e[i]);i++)r=s in r?r[s]:void 0;return r}},{key:"plain",value:function(){return this.data}},{key:"clone",value:function(){return JSON.parse(JSON.stringify(this.data))}},{key:"set",value:function(t,r){r instanceof e&&(r=r.plain());var n=t.split("."),s=n.pop(),o=this.objectifier(n,this.data);return o&&s?o[s]=r:void 0}},{key:"get",value:function(t){var r=this.objectifier(t.split("."),this.data);return"object"===Object(ge.a)(r)&&null!==r?new e(r):r}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"is",value:function(e){return!0===this.get(e)}},{key:"isEmpty",value:function(e){return""==this.get(e)||null==this.get(e)}},{key:"with",value:function(e,t){void 0!==this.get(e)&&t(this.get(e))}},{key:"each",value:function(e){for(var t in this.data)this.data.hasOwnProperty(t)&&e(this.get(t),t)}},{key:"empty",value:function(){this.data={}}}]),e}()),fe=function(){function e(t,r,n,o,c,d){var h=this;Object(l.a)(this,e),this.wanderer=t,this.broadcast=r,this.vue=n,this.store=o,this.vueGraph=c,this.worker=d,this.cytoscape=void 0,this.animatingTraversal=!1,this.animationEdgeOffset=0,this.animatingEdges=!1,this.vertexCollectionProps=new me,this.edgeCollectionProps=new me,this.subscriber=this.broadcast.subscribe("builder"),this.subscriber.on("addVertexCollectionProps",(function(e){var t=e.name,r=e.props;(r=new me(r)).with("builder",(function(e){h.vertexCollectionProps.set(t,e)}))})),this.subscriber.on("addEdgeCollectionProps",(function(e){var t=e.name,r=e.props;(r=new me(r)).with("builder",(function(e){h.edgeCollectionProps.set(t,e)}))})),this.subscriber.on("setLanguage",(function(e){h.store.commit("wandererBuilder/setCurrentLanguage",e),h.rebuildCytoscape()})),this.subscriber.on("setCurrentUrl",(function(e){h.store.commit("wandererBuilder/setCurrentUrl",e)})),this.subscriber.on("truncate",(function(){h.cytoscape.remove("*"),h.store.commit("wandererBuilder/truncate")})),this.subscriber.on("addVertexFromData",(function(e){e=new me(e),h.addVertexListener(e)})),this.subscriber.on("addEdgeFromData",(function(e){e=new me(e),h.addEdgeListener(e)})),this.subscriber.on("removeVertexById",(function(e){h.cytoscape.getElementById(e).remove()})),this.subscriber.on("removeEdgeById",(function(e){h.cytoscape.getElementById(e).remove()})),this.subscriber.on("setVertexDataValue",(function(){})),this.subscriber.on("setEdgeDataValue",(function(){})),this.worker.addEventListener("message",(function(e){switch(e.data.event){case"animateTraversal":h.animateTraversal(e.data.payload)}}),!1)}return Object(c.a)(e,[{key:"setCurrentLanguage",value:function(e){this.store.commit("wandererBuilder/setCurrentLanguage",e),this.rebuildCytoscape(),this.subscriber.emit("setLanguage",e)}},{key:"getCurrentLanguage",value:function(){return this.store.state.wandererBuilder.currentLanguage}},{key:"getAllVertexCollectionProps",value:function(){return this.vertexCollectionProps}},{key:"getVertexCollectionPropsById",value:function(e){var t=this.vueGraph.getVertexDataValue(e,"_collection");if(this.vertexCollectionProps.has(t))return this.vertexCollectionProps.get(t)}},{key:"getEdgeCollectionPropsById",value:function(e){var t=this.vueGraph.getEdgeDataValue(e,"_collection");if(this.edgeCollectionProps.has(t))return this.edgeCollectionProps.get(t)}},{key:"getVertexDataValue",value:function(e){var t=this.store.state.wandererBuilder.editVertex;return this.vueGraph.getVertexDataValue(t,e)}},{key:"getTranslatableVertexDataValue",value:function(e){var t=this.store.state.wandererBuilder.currentLanguage,r=this.store.state.wandererBuilder.editVertex;return this.vueGraph.getVertexDataValue(r,e,t)}},{key:"setVertexDataValue",value:function(e,t){var r=this.store.state.wandererBuilder.editVertex;this.vueGraph.setVertexDataValue(r,e,t)}},{key:"setTranslatableVertexDataValue",value:function(e,t){var r=this.store.state.wandererBuilder.currentLanguage,n=this.store.state.wandererBuilder.editVertex;this.vueGraph.setVertexDataValue(n,e,t,r)}},{key:"getEdgeDataValue",value:function(e){var t=this.store.state.wandererBuilder.editEdge;return this.vueGraph.getEdgeDataValue(t,e)}},{key:"getTranslatableEdgeDataValue",value:function(e){var t=this.store.state.wandererBuilder.currentLanguage,r=this.store.state.wandererBuilder.editEdge;return this.vueGraph.getEdgeDataValue(r,e,t)}},{key:"getTranslatableOriginDataValue",value:function(e){var t=this.store.state.wandererBuilder.currentLanguage;return this.vueGraph.getOriginDataValue(e,t)}},{key:"setEdgeDataValue",value:function(e,t){var r=this.store.state.wandererBuilder.editEdge;this.vueGraph.setEdgeDataValue(r,e,t)}},{key:"setTranslatableEdgeDataValue",value:function(e,t){var r=this.store.state.wandererBuilder.currentLanguage,n=this.store.state.wandererBuilder.editEdge;this.vueGraph.setEdgeDataValue(n,e,t,r)}},{key:"getSelectedCytoscapeVertexIds",value:function(){var e=this.cytoscape.$("node:selected"),t=[];return e.each((function(e){t.push(e.id())})),t}},{key:"getSelectedCytoscapeEdgeIds",value:function(){var e=this.cytoscape.$("edge:selected"),t=[];return e.each((function(e){t.push(e.id())})),t}},{key:"unselect",value:function(){this.cytoscape.$("node:selected").unselect(),this.cytoscape.$("edge:selected").unselect(),this.store.commit("wandererBuilder/setSelectedEdgeIds",[]),this.store.commit("wandererBuilder/setSelectedVertexIds",[])}},{key:"vertexDataToCytoscape",value:function(e){var t=this,r={};this.vertexCollectionProps.with(e.get("_collection")+".toCytoscape",(function(n){r=n(e,t.store.state.wandererBuilder.currentLanguage)})),r.id=e.get("_id"),this.store.state.wandererBuilder.debug&&(r.label=r.label+" ("+e.get("_id")+")"),this.cytoscape.getElementById(e.get("_id")).data(r)}},{key:"edgeDataToCytoscape",value:function(e){var t=this,r=this.getVertexCollectionPropsById(e.get("_from")),n=this.getVertexCollectionPropsById(e.get("_to")),o={};this.edgeCollectionProps.with(e.get("_collection")+".toCytoscape",(function(l){o=l(e,r,n,t.store.state.wandererBuilder.currentLanguage)})),o.id=e.get("_id"),this.store.state.wandererBuilder.debug&&(o.label=o.label+" ("+e.get("_id")+")"),this.cytoscape.getElementById(e.get("_id")).data(o)}},{key:"rebuildCytoscapeVertexById",value:function(e){var t=this.vueGraph.getVertexDataById(e);t=new me(t),this.vertexDataToCytoscape(t)}},{key:"rebuildCytoscapeEdgeById",value:function(e){var t=this.vueGraph.getEdgeDataById(e);t=new me(t),this.edgeDataToCytoscape(t)}},{key:"rebuildCytoscape",value:function(){var e=this,t=this.vueGraph.getAllVertexData();(t=new me(t)).each((function(t){e.vertexDataToCytoscape(t)}));var r=this.vueGraph.getAllEdgeData();(r=new me(r)).each((function(t){e.edgeDataToCytoscape(t)}))}},{key:"addVertexListener",value:function(e){var t={data:{id:e.get("_id")},position:{x:e.get("_x"),y:e.get("_y")}};this.vertexCollectionProps.with(e.get("_collection")+".cytoscapeClasses",(function(e){t.classes=e})),this.cytoscape.add(t),this.vertexDataToCytoscape(e),e.is("_origin")&&!e.is("_foreign")&&(this.cytoscape.center(e.get("_id")),this.cytoscape.zoom(1))}},{key:"addEdgeListener",value:function(e){var t={data:{id:e.get("_id"),source:e.get("_from"),target:e.get("_to")}};this.edgeCollectionProps.with(e.get("_collection")+".cytoscapeClasses",(function(e){t.classes=e})),this.cytoscape.add(t),this.edgeDataToCytoscape(e)}},{key:"addVertex",value:function(e,t,r){var n=this.vertexCollectionProps.get(e),o={};return n.with("defaultFields",(function(e){o=e.clone()})),o._id=this.wanderer.getRandomId(),o._collection=e,o._origin=!1,o._x=t,o._y=r,this.subscriber.emit("addVertexFromData",o),this.addVertexListener(new me(o)),o._id}},{key:"addEdge",value:function(e,t,r){var n=this,o=this.edgeCollectionProps.get(e),l={};return o.with("defaultFields",(function(e){l=e(n.getVertexCollectionPropsById(t),n.getVertexCollectionPropsById(r))})),l._id=this.wanderer.getRandomId(),l._from=t,l._to=r,l._collection=e,this.subscriber.emit("addEdgeFromData",l),this.addEdgeListener(new me(l)),l._id}},{key:"appendVertex",value:function(e,t,r){var n=this.cytoscape.getElementById(e).position(),o=n.x+Math.floor(51*Math.random()+50),l=n.y+Math.floor(51*Math.random()+50),c=this.addVertex(t,o,l);this.addEdge(r,e,c)}},{key:"isAllowedConnection",value:function(e,t,r){var n=!0,o=!0;return this.edgeCollectionProps.with(r+".restrictSourceVertices",(function(t){n=!1,t.each((function(t){t==e&&(n=!0)}))})),this.edgeCollectionProps.with(r+".restrictTargetVertices",(function(e){o=!1,e.each((function(e){e==t&&(o=!0)}))})),!(!n||!o)}},{key:"isAllowedOutgoingConnection",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.vertexCollectionProps.with(e+".restrictOutgoingConnections",(function(e){return e.each((function(e){e.with("to",(function(n){if(n==t){if(!r)return!0;e.with("through",(function(e){if(e==r)return!0}))}}))})),!1})),!0}},{key:"isAllowedIncommingConnection",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.vertexCollectionProps.with(e+".restrictIncommingConnections",(function(e){return e.each((function(e){e.with("from",(function(n){if(n==t){if(!r)return!0;e.with("through",(function(e){if(e==r)return!0}))}}))})),!1})),!0}},{key:"getPossibleOutgoingCollections",value:function(e){var t=this,r=[];return this.vertexCollectionProps.each((function(n,o){if(n.is("creatable")){var l={to:{name:o,collection:n.plain()},through:{}};t.edgeCollectionProps.each((function(r,n){r.is("creatable")&&t.isAllowedOutgoingConnection(e,o,n)&&t.isAllowedIncommingConnection(o,e,n)&&t.isAllowedConnection(e,o,n)&&(l.through[n]=r.plain())})),Object.keys(l.through).length&&r.push(l)}})),new me(r)}},{key:"getPossibleEdgeCollectionNames",value:function(e,t){var r=this,n=[];return this.edgeCollectionProps.each((function(o,l){o.is("creatable")&&r.isAllowedOutgoingConnection(e,t,l)&&r.isAllowedIncommingConnection(t,e,l)&&r.isAllowedConnection(e,t,l)&&n.push(l)})),n}},{key:"animateTraversal",value:function(e){var t=this,r=e.activatedVertexIds,n=e.activatedEdgeIds;if(!this.animatingTraversal){this.animatingTraversal=!0;var o=this.cytoscape.collection();for(var l in r)o=o.union(this.cytoscape.getElementById(r[l]));for(var c in n)o=o.union(this.cytoscape.getElementById(n[c]));o.addClass("pulse"),setTimeout((function(){o.removeClass("pulse")}),500),setTimeout((function(){t.animatingTraversal=!1}),1500)}}},{key:"generateExportData",value:function(){var e={vertices:[],edges:[]};for(var i in this.store.state.wandererGraph.vertexDocumentIds)void 0!==this.store.state.wandererGraph.vertexDocumentData[this.store.state.wandererGraph.vertexDocumentIds[i]]._foreign&&!1!==this.store.state.wandererGraph.vertexDocumentData[this.store.state.wandererGraph.vertexDocumentIds[i]]._foreign||(this.store.state.wandererGraph.vertexDocumentData[this.store.state.wandererGraph.vertexDocumentIds[i]]._origin&&(this.vueGraph.setVertexDataValue(this.store.state.wandererGraph.vertexDocumentIds[i],"builder","wanderer.ai"),this.vueGraph.setVertexDataValue(this.store.state.wandererGraph.vertexDocumentIds[i],"target","web"),this.vueGraph.setVertexDataValue(this.store.state.wandererGraph.vertexDocumentIds[i],"version",this.version),this.vueGraph.setVertexDataValue(this.store.state.wandererGraph.vertexDocumentIds[i],"time",new Date)),e.vertices.push(this.store.state.wandererGraph.vertexDocumentData[this.store.state.wandererGraph.vertexDocumentIds[i]]));for(var t in this.store.state.wandererGraph.edgeDocumentIds)void 0!==this.store.state.wandererGraph.edgeDocumentData[this.store.state.wandererGraph.edgeDocumentIds[t]]._foreign&&!1!==this.store.state.wandererGraph.edgeDocumentData[this.store.state.wandererGraph.edgeDocumentIds[t]]._foreign||e.edges.push(this.store.state.wandererGraph.edgeDocumentData[this.store.state.wandererGraph.edgeDocumentIds[t]]);return e}},{key:"initCytoscape",value:function(e){var t=this;de.a.use(pe.a),this.cytoscape=de()(e);var r,n,o=this,l=[];l.push({selector:"node",style:{label:"data(label)","text-wrap":"ellipsis","text-max-width":"500px","border-width":2,"transition-property":"border-color","transition-duration":"0.2s"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","source-arrow-shape":"circle","text-rotation":"autorotate","transition-property":"line-color","transition-duration":"0.2s"}}),this.vertexCollectionProps.each((function(e){e.with("cytoscapeStyles",(function(e){l=e.plain().concat(l)}))})),this.edgeCollectionProps.each((function(e){e.with("cytoscapeStyles",(function(e){l=e.plain().concat(l)}))})),l.push({selector:"node.pulse",style:{"border-color":"#FEC106"}},{selector:"edge.pulse",style:{"line-color":"#FEC106"}},{selector:"node:selected",style:{"border-color":"black"}},{selector:"edge:selected",style:{"line-color":"black","target-arrow-color":"black","source-arrow-color":"black"}}),this.cytoscape.style().fromJson(l).update(),this.vertexCollectionProps.each((function(e,r){var n=[];t.getPossibleOutgoingCollections(r).each((function(e){e.with("to.collection",(function(t){e.with("to.name",(function(r){e.with("through",(function(e){e.each((function(e,o){t.is("appendableViaCxtMenu")&&t.has("ctxMenuAllowedEdge")&&t.get("ctxMenuAllowedEdge")==o&&n.push({fillColor:t.get("color"),content:e.get("label")+" "+t.get("label"),select:function(e){e.trigger("append",{vertexCollectionName:r,edgeCollectionName:o})}})}))}))}))}))})),t.cytoscape.cxtmenu({menuRadius:150,selector:e.get("cytoscapeCxtMenuSelector"),commands:n,fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(92, 194, 237, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart",itemColor:"black",zIndex:9999,atMouse:!1})})),this.cytoscape.on("click",(function(e){var t=e.target;n&&r&&clearTimeout(n),r===t?(t.trigger("dblclick"),r=null):(n=setTimeout((function(){r=null}),300),r=t)})),this.cytoscape.on("select","node",(function(){var e=o.getSelectedCytoscapeVertexIds();o.store.commit("wandererBuilder/setSelectedVertexIds",e)})),this.cytoscape.on("dblclick","node",(function(){o.store.commit("wandererBuilder/setEditVertex",this.id())})),this.cytoscape.on("unselect","node",(function(){var e=o.getSelectedCytoscapeVertexIds();o.store.commit("wandererBuilder/setSelectedVertexIds",e)})),this.cytoscape.on("select","edge",(function(){var e=o.getSelectedCytoscapeEdgeIds();o.store.commit("wandererBuilder/setSelectedEdgeIds",e)})),this.cytoscape.on("dblclick","edge",(function(){o.store.commit("wandererBuilder/setEditEdge",this.id())})),this.cytoscape.on("unselect","edge",(function(){var e=o.getSelectedCytoscapeEdgeIds();o.store.commit("wandererBuilder/setSelectedEdgeIds",e)})),this.cytoscape.on("append","node",(function(e,t){var r=t.vertexCollectionName,n=t.edgeCollectionName;o.appendVertex(this.id(),r,n)}));var c=null;this.cytoscape.on("drag","node",(function(){c&&clearTimeout(c);var e=o.cytoscape.$("node:grabbed");c=setTimeout((function(){e.forEach((function(e){e.trigger("drop")}))}),500)})),this.cytoscape.on("drop","node",(function(){if(1==o.vueGraph.getVertexDataValue(this.id(),"_origin")&&null==o.vueGraph.getVertexDataValue(this.id(),"_foreign"))this.position({x:0,y:0}),o.store.dispatch("wandererBuilder/addAlert",{message:"You cannot move the origin node",type:"info"});else{var e=this.position();o.vueGraph.setVertexDataValue(this.id(),"_x",e.x),o.vueGraph.setVertexDataValue(this.id(),"_y",e.y)}}))}}]),e}(),ve={},be=(r(265),Object(I.a)(ve,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"builder--content"},[this._t("default")],2)}),[],!1,null,null,null).exports),xe={props:{title:{type:String,default:""},show:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},size:{type:String,default:"auto"}},data:function(){return{showModal:this.show}},watch:{show:function(e,t){this.showModal=e}},methods:{close:function(){this.showClose&&this.$emit("closeButton")}}},ye=(r(267),Object(I.a)(xe,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showModal?r("div",{staticClass:"modal fixed w-full h-full top-0 left-0 flex items-center justify-center"},[r("div",{staticClass:"modal--overlay absolute w-full h-full bg-gray-dark opacity-50",on:{click:function(t){return e.close()}}}),e._v(" "),r("div",{class:"modal--container modal--container-"+e.size+" bg-gray mx-auto rounded shadow-lg z-40 overflow-y-auto"},[r("div",{staticClass:"modal--content text-left"},[e.showHeader?r("div",{staticClass:"px-6 pt-3 flex justify-between items-center"},[e.title?r("p",{staticClass:"text-2xl font-bold"},[e._v(e._s(e.title))]):e._e(),e._v(" "),e.showClose?r("div",{staticClass:"pl-4 modal--close cursor-pointer z-50",on:{click:function(t){return e.close()}}},[r("svg",{staticClass:"fill-current text-black",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"}},[r("path",{attrs:{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"}})])]):e._e()]):e._e(),e._v(" "),r("div",{staticClass:"px-6 py-6"},[e._t("default")],2),e._v(" "),e.showFooter?r("div",{staticClass:"flex justify-between px-6 pb-3"},[r("div",[e._t("buttons")],2),e._v(" "),r("div",[e.showClose?r("builder-button",{staticClass:"modal--close",attrs:{size:"small",color:"gray-dark"},on:{click:function(t){return e.close()}}},[e._v("Close")]):e._e()],1)]):e._e()])])]):e._e()}),[],!1,null,null,null).exports),we={props:{color:{type:String,default:"blue"},textColor:{type:String,default:"white"},size:{type:String,default:"normal"}}},Ve=(r(269),Object(I.a)(we,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:"builder--button builder--button-"+e.size+" bg-"+e.color+" rounded flex justify-center items-center text-center text-"+e.textColor,on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,null,null,null).exports),_e={props:{}},Ce=(r(271),Object(I.a)(_e,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"builder--button-group flex flex-wrap"},[this._t("default")],2)}),[],!1,null,null,null).exports),ke={props:{color:{type:String,default:"blue"},textColor:{type:String,default:"white"}}},De=(r(273),Object(I.a)(ke,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:"circle--button bg-"+e.color+" text-"+e.textColor,on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,null,null,null).exports),Ie={props:{value:{type:String},label:{type:String,default:"Input"},placeholder:{type:String,default:""},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},$e=Object(I.a)(Ie,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:flex md:items-center mb-6"},[r("div",{staticClass:"md:w-1/5"},[r("label",{staticClass:"block text-gray-500 md:text-right mb-1 md:mb-0 pr-4",attrs:{for:e._uid}},[e._v("\n      "+e._s(e.label)+"\n    ")])]),e._v(" "),r("div",{staticClass:"md:w-4/5"},["checkbox"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"rounded w-full py-2 px-4 leading-tight focus:outline-none bg-white border-2 border-black focus:border-blue",attrs:{placeholder:e.placeholder,id:e._uid,disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.inputVal)?e._i(e.inputVal,null)>-1:e.inputVal},on:{change:function(t){var r=e.inputVal,n=t.target,o=!!n.checked;if(Array.isArray(r)){var l=e._i(r,null);n.checked?l<0&&(e.inputVal=r.concat([null])):l>-1&&(e.inputVal=r.slice(0,l).concat(r.slice(l+1)))}else e.inputVal=o}}}):"radio"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"rounded w-full py-2 px-4 leading-tight focus:outline-none bg-white border-2 border-black focus:border-blue",attrs:{placeholder:e.placeholder,id:e._uid,disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.inputVal,null)},on:{change:function(t){e.inputVal=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"rounded w-full py-2 px-4 leading-tight focus:outline-none bg-white border-2 border-black focus:border-blue",attrs:{placeholder:e.placeholder,id:e._uid,disabled:e.disabled,type:e.type},domProps:{value:e.inputVal},on:{input:function(t){t.target.composing||(e.inputVal=t.target.value)}}})])])}),[],!1,null,null,null).exports,Ee={props:{value:{type:String},label:{type:String,default:"Input"},placeholder:{type:String,default:""},type:{type:String,default:"text"}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Be=(r(275),Object(I.a)(Ee,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:flex md:items-center mb-6"},[r("div",{staticClass:"md:w-1/5"},[r("label",{staticClass:"block text-gray-500 md:text-right mb-1 md:mb-0 pr-4",attrs:{for:e._uid}},[e._v("\n      "+e._s(e.label)+"\n    ")])]),e._v(" "),r("div",{staticClass:"md:w-4/5"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"builder--input-textarea bg-gray-200 appearance-none rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white border-2 border-black focus:border-blue",attrs:{placeholder:e.placeholder,id:e._uid,type:e.type},domProps:{value:e.inputVal},on:{input:function(t){t.target.composing||(e.inputVal=t.target.value)}}})])])}),[],!1,null,null,null).exports),Me={props:{value:{type:String},options:{type:Object},label:{type:String,default:"Input"}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Te=Object(I.a)(Me,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:flex md:items-center mb-6"},[r("div",{staticClass:"md:w-1/5"},[r("label",{staticClass:"block text-gray-500 md:text-right mb-1 md:mb-0 pr-4",attrs:{for:e._uid}},[e._v("\n      "+e._s(e.label)+"\n    ")])]),e._v(" "),r("div",{staticClass:"md:w-4/5"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"rounded w-full py-2 px-4 leading-tight focus:outline-none bg-white border-2 border-black focus:border-blue",attrs:{id:e._uid},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.inputVal=t.target.multiple?r:r[0]}}},e._l(e.options,(function(label,t){return r("option",{domProps:{value:t}},[e._v(e._s(label))])})),0)])])}),[],!1,null,null,null).exports,Le={props:{value:{},label:{type:String,default:"Input"},min:{type:String,default:0},max:{type:String,default:100}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Se=Object(I.a)(Le,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:flex md:items-center mb-6"},[r("div",{staticClass:"md:w-1/5"},[r("label",{staticClass:"block text-gray-500 md:text-right mb-1 md:mb-0 pr-4",attrs:{for:e._uid}},[e._v("\n      "+e._s(e.label)+" ("+e._s(e.inputVal)+")\n    ")])]),e._v(" "),r("div",{staticClass:"md:w-4/5"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"rounded bg-gray-200 appearance-none w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white border-2 border-black focus:border-blue",attrs:{id:e._uid,min:e.min,max:e.max,type:"range"},domProps:{value:e.inputVal},on:{__r:function(t){e.inputVal=t.target.value}}})])])}),[],!1,null,null,null).exports,Ge=(r(277),{components:{Icon:O.a},props:{value:{type:Boolean},label:{type:String,default:"Input"}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}}),Oe=(r(278),Object(I.a)(Ge,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"builder--checkbox flex mb-6 w-1/4 items-start"},[r("div",{staticClass:"w-1/5"},[r("label",{staticClass:"builder--checkicon"},[e.inputVal?r("icon",{attrs:{name:"check"}}):e._e(),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"py-2 px-4 leading-tight focus:outline-none focus:bg-white border-2 border-white focus:border-blue",attrs:{id:e._uid,type:"checkbox"},domProps:{checked:Array.isArray(e.inputVal)?e._i(e.inputVal,null)>-1:e.inputVal},on:{change:function(t){var r=e.inputVal,n=t.target,o=!!n.checked;if(Array.isArray(r)){var l=e._i(r,null);n.checked?l<0&&(e.inputVal=r.concat([null])):l>-1&&(e.inputVal=r.slice(0,l).concat(r.slice(l+1)))}else e.inputVal=o}}})],1)]),e._v(" "),r("div",{staticClass:"w-4/5 pl-2 pr-2"},[r("label",{staticClass:"block text-gray-500 text-left mb-1 md:mb-0 pr-2",attrs:{for:e._uid}},[e._v("\n      "+e._s(e.label)+"\n    ")])])])}),[],!1,null,null,null).exports),je={props:{}},Ae=(r(280),Object(I.a)(je,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"builder--checkbox-group flex flex-wrap"},[t("div",{staticClass:"w-1/5"}),this._v(" "),t("div",{staticClass:"w-4/5 flex flex-wrap"},[this._t("default")],2)])}),[],!1,null,null,null).exports),Fe={install:function(e){var t=e.require("broadcast"),r=e.require("vue"),n=e.require("store"),l=e.require("vueGraph"),c=e.require("worker");r.component("builder-content",be),r.component("builder-modal",ye),r.component("builder-button",Ve),r.component("builder-button-group",Ce),r.component("builder-circle-button",De),r.component("builder-text-input",$e),r.component("builder-textarea-input",Be),r.component("builder-select-input",Te),r.component("builder-range-input",Se),r.component("builder-checkbox-input",Oe),r.component("builder-checkbox-group",Ae),n.registerModule("wandererBuilder",{namespaced:!0,state:{debug:!1,tutorialMode:!1,currentFlowUrl:"",currentLanguage:"en",alerts:[],editVertex:0,editEdge:0,selectedVertexIds:[],selectedEdgeIds:[]},mutations:{setCurrentLanguage:function(e,t){e.currentLanguage=t},setCurrentUrl:function(e,t){e.currentFlowUrl=t},setTutorialMode:function(e,t){e.tutorialMode=t},setEditVertex:function(e,t){e.editVertex=t},setEditEdge:function(e,t){e.editEdge=t},setSelectedVertexIds:function(e,t){for(var i in t)-1==e.selectedVertexIds.indexOf(t[i])&&e.selectedVertexIds.push(t[i]);for(var r in e.selectedVertexIds)-1==t.indexOf(e.selectedVertexIds[r])&&e.selectedVertexIds.splice(e.selectedVertexIds.indexOf(e.selectedVertexIds[r]),1)},setSelectedEdgeIds:function(e,t){e.selectedEdgeIds=t},addAlert:function(e,t){var r=t.message,n=t.type;null==n&&(n="primary"),e.alerts.push({message:r,type:n})},removeFirstAlert:function(e){e.alerts.shift()},truncate:function(e){this._vm.$set(e,"alerts",[]),this._vm.$set(e,"editVertex",0),this._vm.$set(e,"editEdge",0),this._vm.$set(e,"selectedVertexIds",[]),this._vm.$set(e,"selectedEdgeIds",[]),this._vm.$set(e,"currentFlowUrl","")}},actions:{addAlert:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.message,o=t.type,e.commit("addAlert",{message:n,type:o}),setTimeout((function(){e.commit("removeFirstAlert")}),5e3);case 3:case"end":return r.stop()}}),r)})))()}}}),r.use(k.a),r.component("wanderer-builder",ce);var d=new fe(e,t,r,n,l,c);e.provide("builder",d),r.prototype.$builder=d}},Pe=(r(282),r(173)),qe=r.n(Pe),ze=r(174),Ne=r.n(ze)()({html:!1,breaks:!0,linkify:!1}),Re=function(){function e(t,r,n,o,c,d){var h=this;Object(l.a)(this,e),this.wanderer=t,this.broadcast=r,this.worker=n,this.vue=o,this.store=c,this.vueGraph=d,this.cytoscape=void 0,this.vertexCollectionProps=new me,this.subscriber=this.broadcast.subscribe("chat"),this.subscriber.on("addVertexCollectionProps",(function(e){var t=e.name,r=e.props;(r=new me(r)).with("chat",(function(e){h.vertexCollectionProps.set(t,e)}))})),this.subscriber.on("setLanguage",(function(e){h.store.commit("wandererChat/setCurrentLanguage",e)})),this.subscriber.on("truncate",(function(){h.store.commit("wandererChat/cleanMessages"),h.store.commit("wandererChat/cleanInteractions"),h.store.commit("wandererChat/setTyping",!1)})),this.subscriber.on("resetLifecycle",(function(){h.store.commit("wandererChat/cleanMessages"),h.store.commit("wandererChat/cleanInteractions"),h.store.commit("wandererChat/setTyping",!1)})),n.addEventListener("message",(function(e){switch(e.data.event){case"sendChatMessage":h.store.commit("wandererChat/addMessage",e.data.payload);break;case"sendChatTyping":h.store.dispatch("wandererChat/setTyping",e.data.payload)}}),!1)}return Object(c.a)(e,[{key:"getMessageDataById",value:function(e){if(null!=this.store.state.wandererChat.messages[e])return this.store.state.wandererChat.messages[e]}},{key:"getVertexCollectionPropsById",value:function(e){var t=this.vueGraph.getVertexDataValue(e,"_collection");if(t&&this.vertexCollectionProps.has(t))return this.vertexCollectionProps.get(t)}},{key:"setCurrentLanguage",value:function(e){this.store.commit("wandererChat/setCurrentLanguage",e),this.subscriber.emit("setLanguage",e)}},{key:"getCurrentLanguage",value:function(){return this.store.state.wandererChat.currentLanguage}},{key:"getVertexDataValue",value:function(e,t){return this.vueGraph.getVertexDataValue(e,t)}},{key:"getTranslatableVertexDataValue",value:function(e,t){var r=this.store.state.wandererChat.currentLanguage;return this.vueGraph.getVertexDataValue(e,t,r)}},{key:"getTranslatableOriginDataValue",value:function(e){var t=this.store.state.wandererChat.currentLanguage;return this.vueGraph.getOriginDataValue(e,t)}},{key:"evaluateVertexDataValue",value:function(e,t,r){null==r&&(r=!1);var template=this.getTranslatableVertexDataValue(e,t);if("string"==typeof template){var data=this.vueGraph.getVertexLifecycleValuesById(e);try{template=qe.a.render(template,data),template=r?Ne.renderInline(template):Ne.render(template)}catch(e){}}return template}}]),e}(),Ue=(r(338),r(341),r(46)),Qe=0,Je={components:{Icon:Ue.a},props:{flowUrl:{type:String,default:""},openLabel:{type:String,default:"Open Chat"}},mounted:function(){""!=this.flowUrl&&this.$wanderer.loadFromUrl(this.flowUrl)},data:function(){return{scrollTimeout:!1,actionRequired:!1}},computed:{isVisible:function(){return this.$store.state.wandererChat.isVisible},vertexCount:function(){return this.$store.state.wandererGraph.vertexDocumentIds.length},name:function(){return this.$chat.getTranslatableOriginDataValue("topic")},messages:function(){return this.$store.state.wandererChat.messageIds},interactions:function(){return this.$store.state.wandererChat.interactionVertexIds},typing:function(){return this.$store.state.wandererChat.typing}},watch:{messages:function(){this.scrollToBottom(),this.messages.length&&(this.actionRequired=!0)},interactions:function(){Qe!=this.interactions.length&&(Qe=this.interactions.length,this.scrollToBottom(),this.actionRequired=!0)},typing:function(e){e&&this.scrollToBottom()}},methods:{show:function(){this.$store.commit("wandererChat/setVisible",!0),this.actionRequired=!1},hide:function(){this.$store.commit("wandererChat/setVisible",!1)},focus:function(){this.unreadMessages=!1,this.actionRequired=!1},restart:function(){this.$wanderer.subscriber.emit("resetLifecycle")},getMessageComponentByMessageId:function(e){var t=this.$chat.getMessageDataById(e),r=this.$chat.getVertexCollectionPropsById(t.vertexId);if(r)return r.get("messageComponent")},isInteractionInsideNavigation:function(e){return this.$vueGraph.getVertexDataValue(e,"showInNavigation")},getInteractionComponentByVertexId:function(e){var t=this.$chat.getVertexCollectionPropsById(e);if(t)return t.get("interactionComponent")},scrollToBottom:function(){var e=this;this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){null!=e.$refs.chatbody&&e.$refs.chatbody.scrollTo(0,e.$refs.chatbody.scrollHeight)}),100)}}},Ye=(r(342),Object(I.a)(Je,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.vertexCount?r("div",{staticClass:"chat--container"},[e.isVisible?e._e():r("div",[r("div",{staticClass:"chat--opener",class:e.actionRequired?"chat--shake":"",on:{click:function(t){return e.show()}}},[e._v("\n      "+e._s(e.openLabel)+"\n    ")])]),e._v(" "),e.isVisible?r("div",{staticClass:"chat--panel",on:{click:function(t){return e.focus()}}},[r("div",{staticClass:"chat--header"},[r("div",{staticClass:"chat--title"},[e._v("\n        "+e._s(e.name)+"\n      ")]),e._v(" "),r("div",{staticClass:"chat--controls"},[r("div",{staticClass:"chat--controls-icon chat--restart",on:{click:function(t){return e.restart()}}},[r("icon",{attrs:{name:"sync"}})],1),e._v(" "),r("div",{staticClass:"chat--controls-icon chat--close",on:{click:function(t){return e.hide()}}},[r("icon",{attrs:{name:"times"}})],1)])]),e._v(" "),r("div",{ref:"chatbody",staticClass:"chat--body"},[r("div",{staticClass:"chat--messages"},e._l(e.messages,(function(t,n){return r("div",{key:n},[r(e.getMessageComponentByMessageId(t),{tag:"component",attrs:{messageId:t}})],1)})),0),e._v(" "),e.typing?r("div",{staticClass:"chat--typing"},[r("span",{staticClass:"chat--typing-circle"}),e._v(" "),r("span",{staticClass:"chat--typing-circle"}),e._v(" "),r("span",{staticClass:"chat--typing-circle"})]):e._e(),e._v(" "),r("div",{staticClass:"chat--interactions"},e._l(e.interactions,(function(t,n){return r("div",{key:n},[e.isInteractionInsideNavigation(t)?e._e():r(e.getInteractionComponentByVertexId(t),{tag:"component",attrs:{vertexId:t}})],1)})),0),e._v(" "),r("div",{staticClass:"chat--spacer"})]),e._v(" "),r("div",{staticClass:"chat--navigation"},e._l(e.interactions,(function(t,n){return r("div",{key:n},[e.isInteractionInsideNavigation(t)?r(e.getInteractionComponentByVertexId(t),{tag:"component",attrs:{vertexId:t}}):e._e()],1)})),0)]):e._e(),e._v(" "),e.actionRequired?r("div",{staticClass:"chat--dot"}):e._e()]):e._e()}),[],!1,null,null,null).exports),He={props:{from:{default:"remote",type:String}}},We=(r(344),Object(I.a)(He,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat--message"},[t("div",{staticClass:"chat--message-bubble",class:{"chat--message-bubble-local":"local"==this.from,"chat--message-bubble-remote":"remote"==this.from}},[this._t("default")],2)])}),[],!1,null,null,null).exports),Ke={props:{theme:{type:String,default:"primary"},size:{type:String,default:"normal"}}},Ze=(r(346),Object(I.a)(Ke,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:"chat--button chat--button-"+e.size+" chat--button-"+e.theme,on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)}),[],!1,null,null,null).exports),Xe={props:{}},et=(r(348),Object(I.a)(Xe,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"chat--button-group"},[this._t("default")],2)}),[],!1,null,null,null).exports),tt={},at=(r(350),Object(I.a)(tt,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"chat--content"},[this._t("default")],2)}),[],!1,null,null,null).exports),nt={install:function(e){var t=e.require("vue"),r=e.require("broadcast"),n=e.require("worker"),l=e.require("store"),c=e.require("vueGraph");t.component("wanderer-chat",Ye),t.component("chat-message",We),t.component("chat-button",Ze),t.component("chat-button-group",et),t.component("chat-content",at),l.registerModule("wandererChat",{namespaced:!0,state:{isVisible:!1,currentLanguage:"en",messageIds:[],messages:{},typing:!1,interactionVertexIds:[]},mutations:{setVisible:function(e,t){e.isVisible=t},setCurrentLanguage:function(e,t){e.currentLanguage=t},setTyping:function(e,t){e.typing=t},addMessage:function(t,r){var n=r.vertexId,o=r.payload,l={id:e.getRandomId(),vertexId:n,payload:o};if(Object.freeze(l),t.messageIds.push(l.id),t.messages[l.id]=l,t.messageIds.length>100){var c=t.messageIds.splice(0,1);null!=c[0]&&delete t.messages[c[0]]}},cleanMessages:function(e){e.messageIds=[],e.messages={}},addInteraction:function(e,t){e.interactionVertexIds.push(t)},cleanInteractions:function(e){e.interactionVertexIds=[]}},actions:{setTyping:function(e,time){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.commit("setTyping",!0),setTimeout((function(){e.commit("setTyping",!1)}),time);case 2:case"end":return t.stop()}}),t)})))()}}});var d=new Re(e,r,n,t,l,c);e.provide("chat",d),t.prototype.$chat=d}};function st(){return new Worker(r.p+"c7c388d.worker.js")}var it={install:function(e){var t=e.require("worker"),r=e.require("broadcast").subscribe("worker-client");r.on("truncate",(function(){t.postMessage({event:"truncate"})})),r.on("resetLifecycle",(function(){t.postMessage({event:"resetLifecycle"})})),r.on("setCurrentUrl",(function(e){t.postMessage({event:"setCurrentUrl",payload:e})})),r.on("setLanguage",(function(e){t.postMessage({event:"setLanguage",payload:e})})),r.on("addVertexFromData",(function(e){t.postMessage({event:"addVertexFromData",payload:e})})),r.on("addEdgeFromData",(function(e){t.postMessage({event:"addEdgeFromData",payload:e})})),r.on("removeVertexById",(function(e){t.postMessage({event:"removeVertexById",payload:e})})),r.on("removeEdgeById",(function(e){t.postMessage({event:"removeEdgeById",payload:e})})),r.on("setVertexDataValue",(function(data){t.postMessage({event:"setVertexDataValue",payload:data})})),r.on("setVertexLifecycleValue",(function(data){t.postMessage({event:"setVertexLifecycleValue",payload:data})})),r.on("setEdgeDataValue",(function(data){t.postMessage({event:"setEdgeDataValue",payload:data})})),t.addEventListener("message",(function(e){switch(e.data.event){case"truncate":r.emit("truncate");break;case"resetLifecycle":r.emit("resetLifecycle");break;case"setLanguage":r.emit("setLanguage",e.data.payload);break;case"setCurrentUrl":r.emit("setCurrentUrl",e.data.payload);break;case"addVertexFromData":r.emit("addVertexFromData",e.data.payload);break;case"addEdgeFromData":r.emit("addEdgeFromData",e.data.payload);break;case"removeVertexById":r.emit("removeVertexById",e.data.payload);break;case"removeEdgeById":r.emit("removeEdgeById",e.data.payload);break;case"setVertexDataValue":r.emit("setVertexDataValue",e.data.payload);break;case"setEdgeDataValue":r.emit("setEdgeDataValue",e.data.payload);break;case"setVertexLifecycleValue":r.emit("setVertexLifecycleValue",e.data.payload);break;case"setTraversedVertices":r.emit("setTraversedVertices",e.data.payload);break;case"setTraversedEdges":r.emit("setTraversedEdges",e.data.payload)}}),!1)}},ot={data:function(){return{}},computed:{topic:{get:function(){return this.$builder.getTranslatableVertexDataValue("topic")},set:function(e){this.$builder.setTranslatableVertexDataValue("topic",e)}},author:{get:function(){return this.$builder.getVertexDataValue("author")},set:function(e){this.$builder.setVertexDataValue("author",e)}},license:{get:function(){return this.$builder.getVertexDataValue("license")},set:function(e){this.$builder.setVertexDataValue("license",e)}}}},lt=Object(I.a)(ot,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-text-input",{attrs:{label:"Topic",placeholder:"Topic"},model:{value:e.topic,callback:function(t){e.topic=t},expression:"topic"}}),e._v(" "),r("builder-text-input",{attrs:{label:"Author",placeholder:"Author"},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}}),e._v(" "),r("builder-text-input",{attrs:{label:"License",placeholder:"License"},model:{value:e.license,callback:function(t){e.license=t},expression:"license"}})],1)}),[],!1,null,null,null).exports,ct={computed:{message:{get:function(){return this.$builder.getTranslatableVertexDataValue("message")},set:function(e){this.$builder.setTranslatableVertexDataValue("message",e)}},forgetful:{get:function(){return this.$builder.getVertexDataValue("forgetful")},set:function(e){this.$builder.setVertexDataValue("forgetful",e)}}}},ut=Object(I.a)(ct,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-textarea-input",{attrs:{label:"Message",placeholder:"Message"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),r("builder-checkbox-group",[r("builder-checkbox-input",{attrs:{label:"Forget on inactive"},model:{value:e.forgetful,callback:function(t){e.forgetful=t},expression:"forgetful"}})],1)],1)}),[],!1,null,null,null).exports,ht={computed:{type:{get:function(){return this.$builder.getEdgeDataValue("type")},set:function(e){this.$builder.setEdgeDataValue("type",e)}},priority:{get:function(){return this.$builder.getEdgeDataValue("priority")},set:function(e){this.$builder.setEdgeDataValue("priority",e)}},name:{get:function(){return this.$builder.getEdgeDataValue("name")},set:function(e){this.$builder.setEdgeDataValue("name",e)}},expose:{get:function(){return this.$builder.getEdgeDataValue("expose")},set:function(e){this.$builder.setEdgeDataValue("expose",e)}},condition:{get:function(){return this.$builder.getEdgeDataValue("condition")},set:function(e){this.$builder.setEdgeDataValue("condition",e)}},types:function(){return{or:"default (Visit the target vertex)",and:"require (The target vertex can only visited if the source was visited too)",not:"forbid (Forbid visiting the target vertex)"}},lifecycleData:function(){var e={none:"none"};if(0!==this.$store.state.wandererBuilder.editEdge){var t=this.$builder.cytoscape.getElementById(this.$store.state.wandererBuilder.editEdge).source().id();this.$builder.getVertexCollectionPropsById(t).with("lifecycleData",(function(t){t.each((function(t,r){e[r]=t.get("label")+(t.is("exposeDefault")?" (default)":"")}))}))}return e},edgeConditions:function(){var e={active:"active",inactive:"inactive"};if(0!==this.$store.state.wandererBuilder.editEdge){var t=this.$builder.cytoscape.getElementById(this.$store.state.wandererBuilder.editEdge).source().id();this.$builder.getVertexCollectionPropsById(t).with("edgeConditions",(function(t){t.each((function(t,r){e[r]=t.get("label")+(t.is("default")?" (default)":"")}))}))}return e}}},pt=Object(I.a)(ht,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-select-input",{attrs:{label:"Type",options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e._v(" "),r("builder-range-input",{attrs:{label:"Priority",type:"range",min:"0",max:"100"},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}}),e._v(" "),r("builder-select-input",{attrs:{label:"Condition",options:e.edgeConditions},model:{value:e.condition,callback:function(t){e.condition=t},expression:"condition"}}),e._v(" "),"not"!=e.type?r("div",[r("builder-select-input",{attrs:{label:"Expose",options:e.lifecycleData},model:{value:e.expose,callback:function(t){e.expose=t},expression:"expose"}}),e._v(" "),"none"!=e.expose?r("div",[r("builder-text-input",{attrs:{label:"Expose Alias"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1):e._e()],1):e._e()],1)}),[],!1,null,null,null).exports,gt={data:function(){return{}},props:{messageId:{type:String}},computed:{messageData:function(){return this.$chat.getMessageDataById(this.messageId)},message:function(){var e="";return null!=this.messageData.vertexId&&(e=this.$chat.evaluateVertexDataValue(this.messageData.vertexId,"message")),e}}},mt=Object(I.a)(gt,(function(){var e=this.$createElement,t=this._self._c||e;return t("chat-message",{attrs:{from:"remote"}},[t("chat-content",[t("div",{staticClass:"message",domProps:{innerHTML:this._s(this.message)}})])],1)}),[],!1,null,null,null).exports,ft={install:function(e){var t=e.require("vue");t.component("wanderer-flow-editor",lt),t.component("wanderer-leads-to-editor",pt),t.component("wanderer-message-editor",ut),t.component("wanderer-message",mt),e.subscriber.emit("addVertexCollectionProps",{name:"flow",props:{builder:{label:"Flow",color:"#FEC106",cytoscapeClasses:"flow",cytoscapeCxtMenuSelector:".flow",creatable:!1,defaultFields:{name:"flow"},cytoscapeStyles:[{selector:".flow",style:{height:"200px",width:"200px","font-size":"30px","background-color":"#FEC106","border-color":"#FEC106","border-width":"5px",label:"data(label)"}}],component:"wanderer-flow-editor",toCytoscape:function(e,t){return e.has("topic."+t)?{label:e.get("topic."+t)}:{label:"Topic"}}}}}),e.subscriber.emit("addVertexCollectionProps",{name:"conclusion",props:{builder:{label:"Conclusion",color:"#FEC106",cytoscapeClasses:"conclusion",cytoscapeCxtMenuSelector:".conclusion",creatable:!0,ctxMenuAllowedEdge:"leadsTo",appendableViaCxtMenu:!0,cytoscapeStyles:[{selector:".conclusion",style:{height:"50px",width:"50px","font-size":"30px","background-color":"#FEC106","border-color":"#FEC106","border-width":"5px",label:"data(label)"}}],toCytoscape:function(e,t){return{label:"Conclusion"}}}}}),e.subscriber.emit("addVertexCollectionProps",{name:"message",props:{builder:{label:"Message",color:"#007BFF",cytoscapeClasses:"message",cytoscapeCxtMenuSelector:".message",creatable:!0,appendableViaCxtMenu:!0,ctxMenuAllowedEdge:"leadsTo",defaultFields:{message:{en:"New message",de:"Neue Nachricht"},forgetful:!1},cytoscapeStyles:[{selector:".message",style:{height:"50px",width:"50px","font-size":"20px","background-color":"#007BFF","border-color":"#007BFF","border-width":"5px",label:"data(label)"}}],component:"wanderer-message-editor",toCytoscape:function(e,t){return e.has("message."+t)?{label:e.get("message."+t)}:{label:"Message"}},lifecycleData:{},edgeConditions:{sent:{default:!0,label:"sent"}}},chat:{messageComponent:"wanderer-message"}}}),e.subscriber.emit("addEdgeCollectionProps",{name:"leadsTo",props:{builder:{label:"leads to",cytoscapeClasses:"leadsTo",creatable:!0,defaultFields:function(e){var t={type:"or",priority:10,name:"",expose:"none",condition:"active"};return e.with("edgeConditions",(function(e){e.each((function(e,r){e.is("default")&&(t.condition=r)}))})),t},cytoscapeStyles:[{selector:".leadsTo",style:{"line-color":"#FEC106","target-arrow-color":"#FEC106","source-arrow-color":"#FEC106",width:"data(priority)",label:"data(label)","line-style":"data(line)"}},{selector:'.leadsTo[type = "and"]',style:{"line-color":"#DC3545","target-arrow-color":"#DC3545","source-arrow-color":"#DC3545"}},{selector:'.leadsTo[type = "not"]',style:{"line-color":"#000000","target-arrow-color":"#000000","source-arrow-color":"#000000"}}],component:"wanderer-leads-to-editor",toCytoscape:function(e,t,r){var n="active";t.with("edgeConditions",(function(e){e.each((function(e,t){e.is("default")&&(n=t)}))}));var o=e.get("priority")/5;o<1&&(o=1);var line="solid",l="";return e.isEmpty("name")||(l=l+"{{"+e.get("name")+"}}"),e.with("condition",(function(e){n!=e&&("inactive"==e&&(l+=" [inactive]"),t.with("edgeConditions."+e+".label",(function(label){l=l+" ["+label+"]"}))),line="dashed"})),{line:line,label:l,type:e.get("type"),priority:o}}}}})}},vt={computed:{question:{get:function(){return this.$builder.getTranslatableVertexDataValue("question")},set:function(e){this.$builder.setTranslatableVertexDataValue("question",e)}},hideMessages:{get:function(){return this.$builder.getVertexDataValue("hideMessages")},set:function(e){this.$builder.setVertexDataValue("hideMessages",e)}},showInNavigation:{get:function(){return this.$builder.getVertexDataValue("showInNavigation")},set:function(e){this.$builder.setVertexDataValue("showInNavigation",e)}},forgetful:{get:function(){return this.$builder.getVertexDataValue("forgetful")},set:function(e){this.$builder.setVertexDataValue("forgetful",e)}},repeatable:{get:function(){return this.$builder.getVertexDataValue("repeatable")},set:function(e){this.$builder.setVertexDataValue("repeatable",e)}},showAlways:{get:function(){return this.$builder.getVertexDataValue("showAlways")},set:function(e){this.$builder.setVertexDataValue("showAlways",e)}}}},bt=Object(I.a)(vt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-textarea-input",{attrs:{label:"Question",placeholder:"Question"},model:{value:e.question,callback:function(t){e.question=t},expression:"question"}}),e._v(" "),r("builder-checkbox-group",[r("builder-checkbox-input",{attrs:{label:"Hide suggestion messages in chat"},model:{value:e.hideMessages,callback:function(t){e.hideMessages=t},expression:"hideMessages"}}),e._v(" "),r("builder-checkbox-input",{attrs:{label:"Repeatable"},model:{value:e.repeatable,callback:function(t){e.repeatable=t},expression:"repeatable"}}),e._v(" "),r("builder-checkbox-input",{attrs:{label:"Forget on inactive"},model:{value:e.forgetful,callback:function(t){e.forgetful=t},expression:"forgetful"}}),e._v(" "),r("builder-checkbox-input",{attrs:{label:"Show in navigation"},model:{value:e.showInNavigation,callback:function(t){e.showInNavigation=t},expression:"showInNavigation"}}),e._v(" "),r("builder-checkbox-input",{attrs:{label:"Show always"},model:{value:e.showAlways,callback:function(t){e.showAlways=t},expression:"showAlways"}})],1)],1)}),[],!1,null,null,null).exports,xt={data:function(){return{types:{button:"Button",checkbox:"Checkbox",text:"Text",textarea:"Textarea"}}},computed:{suggestion:{get:function(){return this.$builder.getTranslatableVertexDataValue("suggestion")},set:function(e){this.$builder.setTranslatableVertexDataValue("suggestion",e)}},type:{get:function(){return this.$builder.getVertexDataValue("type")},set:function(e){this.$builder.setVertexDataValue("type",e)}},priority:{get:function(){return this.$builder.getVertexDataValue("priority")},set:function(e){this.$builder.setVertexDataValue("priority",e)}},required:{get:function(){return this.$builder.getVertexDataValue("required")},set:function(e){this.$builder.setVertexDataValue("required",e)}}}},yt=Object(I.a)(xt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-text-input",{attrs:{label:"Suggestion",placeholder:"Suggestion"},model:{value:e.suggestion,callback:function(t){e.suggestion=t},expression:"suggestion"}}),e._v(" "),r("builder-select-input",{attrs:{label:"Type",options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e._v(" "),r("builder-range-input",{attrs:{label:"Priority",type:"range",min:"0",max:"100"},model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}}),e._v(" "),"button"!=e.type?r("builder-checkbox-group",[r("builder-checkbox-input",{attrs:{label:"Required"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}})],1):e._e()],1)}),[],!1,null,null,null).exports,wt=(r(352),{components:{Icon:r(73).a},props:{vertexId:{type:String}},data:function(){return{values:{},validationAttempts:{}}},computed:{question:function(){return null!=this.vertexId&&this.$chat.evaluateVertexDataValue(this.vertexId,"question")},showInNavigation:function(){return null!=this.vertexId&&this.$vueGraph.getVertexDataValue(this.vertexId,"showInNavigation")},hideMessages:function(){return null!=this.vertexId&&this.$vueGraph.getVertexDataValue(this.vertexId,"hideMessages")},answered:function(){return null!=this.vertexId&&this.$vueGraph.getVertexLifecycleValue(this.vertexId,"answered")},hide:function(){return!this.answered||!!this.hideMessages},suggestions:function(){var e=this,t=[];if(null!=this.vertexId&&null!=this.$store.state.wandererQuestion.suggestions[this.vertexId]){var r=this.$store.state.wandererQuestion.suggestions[this.vertexId];if(null!=r)for(var i in r=r.sort((function(a,b){return e.$vueGraph.getVertexDataValue(b,"priority")-e.$vueGraph.getVertexDataValue(a,"priority")})))t.push({_id:r[i],suggestion:this.$chat.evaluateVertexDataValue(r[i],"suggestion",!0),type:this.$vueGraph.getVertexDataValue(r[i],"type"),priority:this.$vueGraph.getVertexDataValue(r[i],"priority"),required:this.$vueGraph.getVertexDataValue(r[i],"required"),invalid:this.$vueGraph.getVertexLifecycleValue(r[i],"invalid")})}return t}},methods:{answer:function(e){var t=this,r=!0;for(var s in null==this.validationAttempts[this.vertexId]?this.validationAttempts[this.vertexId]=1:this.validationAttempts[this.vertexId]++,this.$vueGraph.setVertexLifecycleValue(this.vertexId,"validationAttempts",this.validationAttempts[this.vertexId]),this.suggestions)"button"!=this.suggestions[s].type&&(null==this.validationAttempts[this.suggestions[s]._id]?this.validationAttempts[this.suggestions[s]._id]=1:this.validationAttempts[this.suggestions[s]._id]++,this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"validationAttempts",this.validationAttempts[this.suggestions[s]._id]),this.suggestions[s].required&&(null!=this.values[this.suggestions[s]._id]&&this.values[this.suggestions[s]._id]?this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"invalid",!1):(this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"invalid",!0),r=!1)));if(r){this.$vueGraph.setVertexLifecycleValue(this.vertexId,"answered",!0),this.$vueGraph.setVertexLifecycleValue(this.vertexId,"invalid",!1);var n=[];for(var s in this.suggestions)null!=e&&e==this.suggestions[s]._id?(this.$vueGraph.setVertexLifecycleValue(e,"answered",!0),n.push(e)):null!=this.values[this.suggestions[s]._id]&&this.values[this.suggestions[s]._id]?(this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"answered",!0),this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"value",this.values[this.suggestions[s]._id]),n.push(this.suggestions[s]._id)):this.$vueGraph.setVertexLifecycleValue(this.suggestions[s]._id,"answered",!1);n=n.sort((function(a,b){return t.$vueGraph.getVertexDataValue(a,"priority")-t.$vueGraph.getVertexDataValue(b,"priority")})),this.hideMessages||this.$store.commit("wandererChat/addMessage",{vertexId:this.vertexId,payload:{answeredSuggestionVertexIds:n}})}else this.$vueGraph.setVertexLifecycleValue(this.vertexId,"invalid",!0)}}}),Vt=(r(355),Object(I.a)(wt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.hide?r("div",[r(e.showInNavigation?"div":"chat-message",{tag:"component",class:e.showInNavigation?"mb-2":"",attrs:{from:"remote"}},[r("chat-content",[r("span",{domProps:{innerHTML:e._s(e.question)}})])],1),e._v(" "),r(e.showInNavigation?"div":"chat-message",{tag:"component",attrs:{from:"local"}},[e._l(e.suggestions,(function(t){return r("div",{key:t._id},["checkbox"==t.type?r("div",{staticClass:"mb-2"},[r("label",{staticClass:"chat-checkinput"},[r("div",{class:"chat-checkinput--box"+(t.invalid?" chat--invalid":"")},[e.values[t._id]?r("icon",{staticClass:"chat-checkinput--icon",attrs:{name:"check"}}):e._e(),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t._id],expression:"values[suggestion._id]"}],staticClass:"chat-checkinput--checkbox",attrs:{type:"checkbox"},domProps:{value:t._id,checked:Array.isArray(e.values[t._id])?e._i(e.values[t._id],t._id)>-1:e.values[t._id]},on:{change:function(r){var n=e.values[t._id],o=r.target,l=!!o.checked;if(Array.isArray(n)){var c=t._id,d=e._i(n,c);o.checked?d<0&&e.$set(e.values,t._id,n.concat([c])):d>-1&&e.$set(e.values,t._id,n.slice(0,d).concat(n.slice(d+1)))}else e.$set(e.values,t._id,l)}}})],1),e._v(" "),r("div",[e._v(e._s(t.suggestion))])])]):e._e(),e._v(" "),"text"==t.type?r("div",{staticClass:"mb-2"},[t.suggestion?r("label",{attrs:{for:t._id}},[e._v(e._s(t.suggestion))]):e._e(),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.values[t._id],expression:"values[suggestion._id]"}],class:"chat--input"+(t.invalid?" chat--invalid":""),attrs:{type:"text",id:t._id},domProps:{value:e.values[t._id]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.answer()},input:function(r){r.target.composing||e.$set(e.values,t._id,r.target.value)}}})]):e._e(),e._v(" "),"textarea"==t.type?r("div",{staticClass:"mb-2"},[t.suggestion?r("label",{attrs:{for:t._id}},[e._v(e._s(t.suggestion))]):e._e(),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.values[t._id],expression:"values[suggestion._id]"}],class:"chat--input"+(t.invalid?" chat--invalid":""),attrs:{id:t._id},domProps:{value:e.values[t._id]},on:{input:function(r){r.target.composing||e.$set(e.values,t._id,r.target.value)}}})]):e._e()])})),e._v(" "),r("chat-button-group",{class:e.showInNavigation?"":"chat--shake"},[e._l(e.suggestions,(function(t){return["button"==t.type?r("chat-button",{key:t._id+"_button",attrs:{disabled:e.answered,theme:e.showInNavigation?"secondary":"primary",size:e.showInNavigation?"small":"normal"},on:{click:function(r){return e.answer(t._id)}}},[e._v(e._s(t.suggestion))]):e._e()]}))],2)],2)],1):e._e()}),[],!1,null,null,null).exports),_t={props:{messageId:{type:String}},data:function(){return{computedMessage:"",computedAnswers:""}},computed:{messageData:function(){return this.$chat.getMessageDataById(this.messageId)},answeredSuggestionVertexIds:function(){return this.messageData.payload.answeredSuggestionVertexIds},question:function(){var e=this.computedMessage;return""==this.computedMessage&&null!=this.messageData.vertexId&&(e=this.$chat.evaluateVertexDataValue(this.messageData.vertexId,"question")),e},answers:function(){var e=this.computedAnswers;if(""==this.computedAnswers&&null!=this.messageData.vertexId&&(e="",null!=this.answeredSuggestionVertexIds))for(var t in this.answeredSuggestionVertexIds){var r=this.$vueGraph.getVertexDataValue(this.answeredSuggestionVertexIds[t],"type"),n=this.$chat.getTranslatableVertexDataValue(this.answeredSuggestionVertexIds[t],"suggestion"),o=this.$vueGraph.getVertexLifecycleValue(this.answeredSuggestionVertexIds[t],"value");"button"!=r&&"checkbox"!=r||(e+=n),"text"!=r&&"textarea"!=r||(e+=o),t!=Object.keys(this.answeredSuggestionVertexIds).length-1&&(e+=", ")}return e},repeatable:function(){return!(-1===this.$store.state.wandererQuestion.traversedQuestions.indexOf(this.messageData.vertexId)||!this.$vueGraph.getVertexDataValue(this.messageData.vertexId,"repeatable"))}},methods:{askAgain:function(){if(this.repeatable)for(var i in this.$vueGraph.setVertexLifecycleValue(this.messageData.vertexId,"answered",!1),this.answeredSuggestionVertexIds)this.$vueGraph.setVertexLifecycleValue(this.answeredSuggestionVertexIds[i],"answered",!1)}}},Ct=Object(I.a)(_t,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("chat-message",{attrs:{from:"remote"}},[r("div",{domProps:{innerHTML:e._s(e.question)}})]),e._v(" "),r("chat-message",{attrs:{from:"local"}},[r("span",[e._v(e._s(e.answers))]),e._v(" "),e.repeatable?r("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.askAgain()}}},[e._v("")]):e._e()])],1)}),[],!1,null,null,null).exports,kt={},Dt=Object(I.a)(kt,(function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  This edge has no propertys. It just connects suggestions and questions together.\n")])}),[],!1,null,null,null).exports,It={install:function(e){var t=e.require("vue"),r=e.require("store"),n=e.require("worker");t.component("wanderer-question-editor",bt),t.component("wanderer-suggestion-editor",yt),t.component("wanderer-question-interaction",Vt),t.component("wanderer-question-message",Ct),t.component("wanderer-is-answerable-by-editor",Dt),r.registerModule("wandererQuestion",{namespaced:!0,state:{suggestions:{},traversedQuestions:[]},mutations:{setTraversedQuestions:function(e,t){this._vm.$set(e,"traversedQuestions",t)},addSuggestions:function(e,t){var r=t.questionId,n=t.suggestionIds;null==e.suggestions[r]&&this._vm.$set(e.suggestions,r,[]),this._vm.$set(e.suggestions,r,n)},truncate:function(e){this._vm.$set(e,"suggestions",{})}}}),e.subscriber.emit("addVertexCollectionProps",{name:"question",props:{builder:{label:"Question",color:"#28A745",cytoscapeClasses:"question",cytoscapeCxtMenuSelector:".question",appendableViaCxtMenu:!0,ctxMenuAllowedEdge:"leadsTo",creatable:!0,restrictPossibleChildren:["suggestion"],defaultFields:{question:{en:"New question",de:"Neue Frage"},hideMessages:!1,showInNavigation:!1,forgetful:!1,repeatable:!0,showAlways:!1},cytoscapeStyles:[{selector:".question",style:{height:"100px",width:"100px","font-size":"30px","background-color":"#28A745","border-color":"#28A745","border-width":"20px",label:"data(label)"}},{selector:".question:parent",style:{"background-opacity":0,"background-color":"#fff","border-color":"#28A745",padding:"50px"}}],component:"wanderer-question-editor",canBeChild:!0,canBeParent:!0,parentLabel:function(data,e){return data.question[e]?data.question[e]:"Question"},toCytoscape:function(e,t){return e.has("question."+t)?{label:e.get("question."+t)}:{label:"Question"}},lifecycleData:{},edgeConditions:{answered:{default:!0,label:"answered"},notAnswered:{label:"not answered"},invalid:{label:"invalid"}}},chat:{messageComponent:"wanderer-question-message",interactionComponent:"wanderer-question-interaction"}}}),e.subscriber.emit("addVertexCollectionProps",{name:"suggestion",props:{builder:{label:"Suggestion",color:"#28A745",cytoscapeClasses:"suggestion",cytoscapeCxtMenuSelector:".suggestion",ctxMenuAllowedEdge:"isAnswerableBy",appendableViaCxtMenu:!0,creatable:!0,restrictPossibleParents:["question"],defaultFields:{suggestion:{de:"Antwortvorschlag",en:"Suggestion"},type:"button",name:"",priority:50,required:!0},cytoscapeStyles:[{selector:".suggestion",style:{height:"data(priority)",width:"data(priority)","font-size":"20px","background-color":"#28A745","border-color":"#28A745","border-width":"5px",label:"data(label)"}}],component:"wanderer-suggestion-editor",canBeChild:!0,toCytoscape:function(e,t){var label="Suggestion";e.has("suggestion."+t)&&(label=e.get("suggestion."+t));var r=e.get("priority");return r<10&&(r=10),{label:label,priority:r+="px"}},lifecycleData:{value:{label:"Value",exposeDefault:!0}},edgeConditions:{answered:{default:!0,label:"answered"},notAnswered:{label:"not answered"}}}}}),e.subscriber.emit("addEdgeCollectionProps",{name:"isAnswerableBy",props:{builder:{label:"is answerable by",cytoscapeClasses:"isAnswerableBy",creatable:!0,defaultFields:function(){return{}},restrictSourceVertices:["question"],restrictTargetVertices:["suggestion"],cytoscapeStyles:[{selector:".isAnswerableBy",style:{"line-color":"#28A745","target-arrow-color":"#28A745","source-arrow-color":"#28A745"}}],component:"wanderer-is-answerable-by-editor"}}}),n.addEventListener("message",(function(e){switch(e.data.event){case"truncate":r.commit("wandererQuestion/truncate");break;case"sendOpenQuestions":var t=e.data.payload;for(var q in r.commit("wandererChat/cleanInteractions"),r.commit("wandererQuestion/truncate"),e.data.payload)t[q].length&&(r.commit("wandererChat/addInteraction",q),r.commit("wandererQuestion/addSuggestions",{questionId:q,suggestionIds:t[q]}));break;case"sendTraversedQuestions":r.commit("wandererQuestion/setTraversedQuestions",e.data.payload)}}),!1)}},$t={computed:{url:{get:function(){return this.$builder.getVertexDataValue("url")},set:function(e){this.$builder.setVertexDataValue("url",e)}},vertexId:{get:function(){return this.$builder.getVertexDataValue("vertexId")},set:function(e){this.$builder.setVertexDataValue("vertexId",e)}}}},Et=Object(I.a)($t,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-text-input",{attrs:{label:"Import URL",placeholder:"https://"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),e._v(" "),r("builder-text-input",{attrs:{label:"Vertex ID",placeholder:"ea900e19-cf32-4ee0-bf05-b54314367aca"},model:{value:e.vertexId,callback:function(t){e.vertexId=t},expression:"vertexId"}})],1)}),[],!1,null,null,null).exports,Bt={computed:{url:{get:function(){return this.$builder.getVertexDataValue("url")},set:function(e){this.$builder.setVertexDataValue("url",e)}}}},Mt=Object(I.a)(Bt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-text-input",{attrs:{label:"Jump URL",placeholder:"https://"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)}),[],!1,null,null,null).exports,Tt={computed:{languages:function(){var e={},t=this.$wanderer.getLanguages(),r=this.$vueGraph.getOriginDataValue("languages");for(var i in r)e[r[i]]=t[r[i]].name;return e},language:{get:function(){return this.$builder.getVertexDataValue("switchToLanguage")},set:function(e){this.$builder.setVertexDataValue("switchToLanguage",e)}}}},Lt=Object(I.a)(Tt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("builder-select-input",{attrs:{label:"Language",options:e.languages},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)}),[],!1,null,null,null).exports,St={install:function(e){var t=e.require("vue");t.component("wanderer-import-editor",Et),t.component("wanderer-jump-editor",Mt),t.component("wanderer-language-editor",Lt),e.subscriber.emit("addVertexCollectionProps",{name:"jump",props:{builder:{label:"Jump",color:"#DC3545",cytoscapeClasses:"jump",cytoscapeCxtMenuSelector:".jump",creatable:!0,defaultFields:{url:""},cytoscapeStyles:[{selector:".jump",style:{height:"100px",width:"100px","font-size":"20px","background-color":"#DC3545","border-color":"#DC3545","border-width":"5px",label:"data(label)"}}],component:"wanderer-jump-editor",toCytoscape:function(e){var label="Jump",base="";return e.isEmpty("url")||-1!=(base=new String(e.get("url")).substring(e.get("url").lastIndexOf("/")+1)).lastIndexOf(".")&&(label=label+" ("+base.substring(0,base.lastIndexOf("."))+")"),{label:label}}}}}),e.subscriber.emit("addVertexCollectionProps",{name:"import",props:{builder:{label:"Import",color:"#DC3545",cytoscapeClasses:"import",cytoscapeCxtMenuSelector:".import",creatable:!0,canBeChild:!0,defaultFields:{url:"",vertexId:"",label:""},cytoscapeStyles:[{selector:".import",style:{height:"100px",width:"100px","font-size":"20px","background-color":"#DC3545","border-color":"#DC3545","border-width":"5px",label:"data(label)"}},{selector:".import:parent",style:{"background-opacity":0,"background-color":"#fff","border-color":"#DC3545",padding:"100px"}}],component:"wanderer-import-editor",toCytoscape:function(e){var label="Import",base="";return e.isEmpty("url")||-1!=(base=new String(e.get("url")).substring(e.get("url").lastIndexOf("/")+1)).lastIndexOf(".")&&(label=label+" ("+base.substring(0,base.lastIndexOf("."))+")"),{label:label}},lifecycleData:{imported:{label:"imported",exposeDefault:!1}},edgeConditions:{imported:{default:!0,label:"imported"}}}}}),e.subscriber.emit("addEdgeCollectionProps",{name:"imports",props:{builder:{label:"imports",cytoscapeClasses:"imports",creatable:!1,defaultFields:function(){return{}},restrictSourceVertices:["import"],cytoscapeStyles:[{selector:".imports",style:{"line-color":"#cccccc","target-arrow-color":"#cccccc","source-arrow-color":"#cccccc"}}]}}}),e.subscriber.emit("addVertexCollectionProps",{name:"language",props:{builder:{label:"Language",color:"#DC3545",cytoscapeClasses:"language",cytoscapeCxtMenuSelector:".language",creatable:!0,canBeChild:!0,defaultFields:{switchToLanguage:"en"},cytoscapeStyles:[{selector:".language",style:{height:"100px",width:"100px","font-size":"20px","background-color":"#DC3545","border-color":"#DC3545",label:"data(label)"}}],component:"wanderer-language-editor",toCytoscape:function(e){return{label:"Language ("+e.get("switchToLanguage")+")"}},lifecycleData:{imported:{label:"switched",exposeDefault:!1}},edgeConditions:{switched:{default:!0,label:"switched"}}}}}),e.subscriber.emit("addVertexCollectionProps",{name:"reset",props:{builder:{label:"Reset",color:"#DC3545",cytoscapeClasses:"reset",cytoscapeCxtMenuSelector:".reset",creatable:!0,defaultFields:{},cytoscapeStyles:[{selector:".reset",style:{height:"100px",width:"100px","font-size":"20px","background-color":"#DC3545","border-color":"#DC3545","border-width":"5px",label:"Reset"}}],component:"wanderer-reset-editor",toCytoscape:function(){return{label:"Reset"}}}}})}};t.a=function(e){e.app;var t=e.store,r=new w,o=new st;r.provide("store",t),r.provide("vue",n.a),r.provide("worker",o),r.use(_),r.use(Fe),r.use(nt),r.use(it),r.use(ft),r.use(It),r.use(St)}}},[[177,3,1,4]]]);